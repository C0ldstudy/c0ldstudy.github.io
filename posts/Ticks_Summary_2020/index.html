<!DOCTYPE html>









<!-- `site.alt_lang` can specify a language different from the UI -->
<html lang="en"
  
>

  <!-- The Head -->

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover"
  >

  
    

    
  

  

  

  
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="Tricks Summary 2020" />
<meta property="og:locale" content="en" />
<meta name="description" content="In the blog, I record several problems that I met with during coding. I hope the content is helpful." />
<meta property="og:description" content="In the blog, I record several problems that I met with during coding. I hope the content is helpful." />
<link rel="canonical" href="http://c0ldstudy.github.io/posts/Ticks_Summary_2020/" />
<meta property="og:url" content="http://c0ldstudy.github.io/posts/Ticks_Summary_2020/" />
<meta property="og:site_name" content="c0ldstudy" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-09-12T00:00:00-07:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Tricks Summary 2020" />
<meta name="twitter:site" content="@JiacenXu" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2020-09-12T00:00:00-07:00","datePublished":"2020-09-12T00:00:00-07:00","description":"In the blog, I record several problems that I met with during coding. I hope the content is helpful.","headline":"Tricks Summary 2020","mainEntityOfPage":{"@type":"WebPage","@id":"http://c0ldstudy.github.io/posts/Ticks_Summary_2020/"},"url":"http://c0ldstudy.github.io/posts/Ticks_Summary_2020/"}</script>
<!-- End Jekyll SEO tag -->

  

  <title>Tricks Summary 2020 | c0ldstudy
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://realfavicongenerator.net/
-->



<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">
<link rel="manifest" href="/assets/img/favicons/site.webmanifest">
<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico">
<meta name="apple-mobile-web-app-title" content="c0ldstudy">
<meta name="application-name" content="c0ldstudy">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">


  
    
      <link rel="preconnect" href="https://fonts.googleapis.com" >
      <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
    
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin>
    
      <link rel="preconnect" href="https://fonts.googleapis.com" >
      <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
    
      <link rel="preconnect" href="https://cdn.jsdelivr.net" >
      <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" >
    

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap">
  

  <!-- GA -->
  

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.1/css/all.min.css">

  <link rel="stylesheet" href="/assets/css/style.css">

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.css">
  

  
    <!-- Manific Popup -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css">
  

  <!-- JavaScript -->

  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.1/dist/jquery.min.js"></script>

  
    <!--
  Switch the mode between dark and light.
-->

<script type="text/javascript">
  class ModeToggle {
    static get MODE_KEY() { return "mode"; }
    static get MODE_ATTR() { return "data-mode"; }
    static get DARK_MODE() { return "dark"; }
    static get LIGHT_MODE() { return "light"; }
    static get ID() { return "mode-toggle"; }

    constructor() {
      if (this.hasMode) {
        if (this.isDarkMode) {
          if (!this.isSysDarkPrefer) {
            this.setDark();
          }
        } else {
          if (this.isSysDarkPrefer) {
            this.setLight();
          }
        }
      }

      let self = this;

      /* always follow the system prefers */
      this.sysDarkPrefers.addEventListener('change', () => {
        if (self.hasMode) {
          if (self.isDarkMode) {
            if (!self.isSysDarkPrefer) {
              self.setDark();
            }
          } else {
            if (self.isSysDarkPrefer) {
              self.setLight();
            }
          }

          self.clearMode();
        }

        self.notify();
      });
    } /* constructor() */

    get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); }

    get isSysDarkPrefer() { return this.sysDarkPrefers.matches; }

    get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; }

    get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; }

    get hasMode() { return this.mode != null; }

    get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); }

    /* get the current mode on screen */
    get modeStatus() {
      if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) {
        return ModeToggle.DARK_MODE;
      } else {
        return ModeToggle.LIGHT_MODE;
      }
    }

    setDark() {
      $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE);
    }

    setLight() {
      $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE);
    }

    clearMode() {
      $('html').removeAttr(ModeToggle.MODE_ATTR);
      sessionStorage.removeItem(ModeToggle.MODE_KEY);
    }

    /* Notify another plugins that the theme mode has changed */
    notify() {
      window.postMessage({
        direction: ModeToggle.ID,
        message: this.modeStatus
      }, "*");
    }

    flipMode() {
      if (this.hasMode) {
        if (this.isSysDarkPrefer) {
          if (this.isLightMode) {
            this.clearMode();
          } else {
            this.setLight();
          }
        } else {
          if (this.isDarkMode) {
            this.clearMode();
          } else {
            this.setDark();
          }
        }
      } else {
        if (this.isSysDarkPrefer) {
          this.setLight();
        } else {
          this.setDark();
        }
      }

      this.notify();
    } /* flipMode() */
  } /* ModeToggle */

  const modeToggle = new ModeToggle();
</script>

  
</head>


  <body data-topbar-visible="true">

    <!--
  The Side Bar
-->

<div id="sidebar" class="d-flex flex-column align-items-end">
  <div class="profile-wrapper text-center">
    <div id="avatar">
      <a href="/" class="mx-auto">
        
          
          <img src="/commons/avatar.png" alt="avatar" onerror="this.style.display='none'">
        
      </a>
    </div>

    <div class="site-title">
      <a href="/">c0ldstudy</a>
    </div>
    <div class="site-subtitle font-italic">Absorb what is useful. Reject what is useless. And add what is essentially your own. --- Bruce Lee</div>

  </div><!-- .profile-wrapper -->

  <ul class="w-100">

    <!-- home -->
    <li class="nav-item">
      <a href="/" class="nav-link">
        <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i>
        <span>HOME</span>
      </a>
    </li>
    <!-- the real tabs -->
    
    <li class="nav-item">
      <a href="/categories/" class="nav-link">
        <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i>
        

        <span>CATEGORIES</span>
      </a>
    </li> <!-- .nav-item -->
    
    <li class="nav-item">
      <a href="/tags/" class="nav-link">
        <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i>
        

        <span>TAGS</span>
      </a>
    </li> <!-- .nav-item -->
    
    <li class="nav-item">
      <a href="/archives/" class="nav-link">
        <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i>
        

        <span>ARCHIVES</span>
      </a>
    </li> <!-- .nav-item -->
    
    <li class="nav-item">
      <a href="/about/" class="nav-link">
        <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i>
        

        <span>ABOUT</span>
      </a>
    </li> <!-- .nav-item -->
    

  </ul> <!-- ul.nav.flex-column -->

  <div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center">

    
      <button class="mode-toggle btn" aria-label="Switch Mode">
        <i class="fas fa-adjust"></i>
      </button>

      
        <span class="icon-border"></span>
      
    

    
      

      
      <a href="https://github.com/c0ldstudy" aria-label="github"
        

        
          target="_blank"
          
        

        

        rel="noopener noreferrer">

        <i class="fab fa-github"></i>
      </a>
      

    
      

      
      <a href="https://twitter.com/JiacenXu" aria-label="twitter"
        

        
          target="_blank"
          
        

        

        rel="noopener noreferrer">

        <i class="fab fa-twitter"></i>
      </a>
      

    
      

      
      <a href="javascript:location.href = 'mailto:' + ['jiacenx','uci.edu'].join('@')" aria-label="email"
        

        

        

        >

        <i class="fas fa-envelope"></i>
      </a>
      

    
      

      
      <a href="/feed.xml" aria-label="rss"
        

        

        

        >

        <i class="fas fa-rss"></i>
      </a>
      

    
      

      
      <a href="https://www.linkedin.com/in/jiacen-xu-021536105/" aria-label="linkedin"
        

        
          target="_blank"
          
        

        

        rel="noopener noreferrer">

        <i class="fab fa-linkedin"></i>
      </a>
      

    

  </div> <!-- .sidebar-bottom -->

</div><!-- #sidebar -->


    <!--
  The Top Bar
-->

<div id="topbar-wrapper">
  <div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4">
    <span id="breadcrumb">

    

    

      

        
          <span>
            <a href="/">
              Home
            </a>
          </span>

        

      

        

      

        

          
            <span>Tricks Summary 2020</span>
          

        

      

    

    </span><!-- endof #breadcrumb -->

    <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i>

    <div id="topbar-title">
      Post
    </div>

    <i id="search-trigger" class="fas fa-search fa-fw"></i>
    <span id="search-wrapper" class="align-items-center">
      <i class="fas fa-search fa-fw"></i>
      <input class="form-control" id="search-input" type="search"
        aria-label="search" autocomplete="off" placeholder="Search...">
    </span>
    <span id="search-cancel" >Cancel</span>
  </div>

</div>


    <div id="main-wrapper" class="d-flex justify-content-center">
      <div id="main" class="container pl-xl-4 pr-xl-4">
        





<div class="row">

  <!-- core -->
  <div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4">
    <div class="post pl-1 pr-1 pl-md-2 pr-md-2">

    

    
      
      
        <!--
  Refactor the HTML structure.
-->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->



<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->



<!-- Change the icon of checkbox -->


<!-- images -->





<!-- Add header for code snippets -->



<!-- Create heading anchors -->





  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    

    

  

  
  

  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    

    

  

  
  

  




<!-- return -->

<h1 data-toc-skip>Tricks Summary 2020</h1>

<div class="post-meta text-muted">
    <!-- published date -->
    <span>
      Posted
      <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->





<em class=""
    data-ts="1599894000"
    data-df="ll"
    data-toggle="tooltip" data-placement="bottom">
  Sep 12, 2020
</em>

    </span>

    <!-- lastmod date -->
    

  

  <div class="d-flex justify-content-between">
    <!-- author(s) -->
    <span>
      

      By

      <em>
      
        <a href="https://twitter.com/JiacenXu">Jiacen (Jason) Xu</a>
      
      </em>
    </span>

    <div>
      <!-- page views -->
      

      <!-- read time -->
      <!--
  Calculate the post's reading time, and display the word count in tooltip
 -->



<!-- words per minute  -->










<!-- return element -->
<span class="readtime" data-toggle="tooltip" data-placement="bottom"
  title="2883 words">
  <em>16 min</em> read</span>

    </div>

  </div> <!-- .d-flex -->

</div> <!-- .post-meta -->

<div class="post-content">
  <p>In the blog, I record several problems that I met with during coding. I hope the content is helpful.</p>

<h2 id="install-nvidia-driver-cuda-and-cudnn-on-ubuntu"><span class="mr-2">Install Nvidia Driver CUDA and CUDNN on Ubuntu</span><a href="#install-nvidia-driver-cuda-and-cudnn-on-ubuntu" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>Official installation tutorial <a href="https://docs.nvidia.com/deeplearning/sdk/cudnn-install/index.html#download">link</a>.</p>

<ol>
  <li>
    <p>Use Command Line: <a href="https://www.cyberciti.biz/faq/ubuntu-linux-install-nvidia-driver-latest-proprietary-driver/">Tutorial</a></p>
  </li>
  <li>
    <p>Search for PPA which can be used to install packages by <code class="language-plaintext highlighter-rouge">apt-get</code>: <a href="https://launchpad.net/~graphics-drivers/+archive/ubuntu/ppa">link</a></p>

    <p>Following the steps:<a href="https://askubuntu.com/questions/1077061/how-do-i-install-nvidia-and-cuda-drivers-into-ubuntu">tutorial</a></p>

    <div class="language-shell highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre></td><td class="rouge-code"><pre><span class="c"># add ppa and find suitable nvidia-driver</span>
<span class="nb">sudo </span>add-apt-repository ppa:graphics-drivers/ppa
<span class="nb">sudo </span>apt-get update
apt-cache search nvidia-driver
<span class="c"># sudo apt-get install nvidia-driver-version</span>
<span class="nb">sudo </span>apt-get <span class="nb">install </span>nvidia-440
<span class="c"># another way to install nvidia driver</span>
ubuntu-drivers devices
<span class="nb">sudo </span>ubuntu-drivers autoinstall
   
<span class="c"># add keys for your specific ubuntu version, be careful about ubuntu1x04</span>
<span class="nb">sudo </span>apt-key adv <span class="nt">--fetch-keys</span>  http://developer.download.nvidia.com/compute/cuda/repos/ubuntu1604/x86_64/7fa2af80.pub
<span class="c"># if error message:</span>
<span class="c"># using the command:</span>
<span class="c"># wget http://developer.download.nvidia.com/compute/cuda/repos/ubuntu1604/x86_64/7fa2af80.pub</span>
<span class="c"># sudo apt-key add 7fa2af80.pub</span>
<span class="nb">sudo </span>bash <span class="nt">-c</span> <span class="s1">'echo "deb http://developer.download.nvidia.com/compute/cuda/repos/ubuntu1604/x86_64 /" &gt; /etc/apt/sources.list.d/cuda.list'</span>
   
<span class="nb">sudo </span>bash <span class="nt">-c</span> <span class="s1">'echo "deb http://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1604/x86_64 /" &gt; /etc/apt/sources.list.d/cuda_learn.list'</span>
   
<span class="nb">sudo </span>apt-get update
<span class="nb">sudo </span>apt <span class="nb">install </span>cuda-10-1
<span class="nb">sudo </span>apt <span class="nb">install </span>libcudnn7
   
<span class="c"># add the following codes to ~/.bashrc</span>
<span class="c"># set PATH for cuda installation</span>
<span class="k">if</span> <span class="o">[</span> <span class="nt">-d</span> <span class="s2">"/usr/local/cuda/bin/"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span>/usr/local/cuda/bin<span class="k">${</span><span class="nv">PATH</span>:+:<span class="k">${</span><span class="nv">PATH</span><span class="k">}}</span>
    <span class="nb">export </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>/usr/local/cuda/lib64<span class="k">${</span><span class="nv">LD_LIBRARY_PATH</span>:+:<span class="k">${</span><span class="nv">LD_LIBRARY_PATH</span><span class="k">}}</span>
<span class="k">fi
   
</span>reboot <span class="nt">-i</span>
   
<span class="c"># check settings</span>
nvcc <span class="nt">--version</span>
/sbin/ldconfig <span class="nt">-N</span> <span class="nt">-v</span> <span class="si">$(</span><span class="nb">sed</span> <span class="s1">'s/:/ /'</span> <span class="o">&lt;&lt;&lt;</span> <span class="nv">$LD_LIBRARY_PATH</span><span class="si">)</span> 2&gt;/dev/null | <span class="nb">grep </span>libcudnn
nvidia-smi
</pre></td></tr></tbody></table></code></div>    </div>
  </li>
  <li>
    <p>Reboot system</p>
  </li>
</ol>

<p>Then the NVIDIA driver will be installed smoothly.  After that, we should install CUDA.</p>

<p>Check CUDA version: <code class="language-plaintext highlighter-rouge">cat /usr/local/cuda/version.txt</code>.</p>

<p>If we want to download package by ourselves, we should check the <a href="https://developer.nvidia.com/cuda-downloads?target_os=Linux&amp;target_arch=x86_64&amp;target_distro=Ubuntu&amp;target_version=1604&amp;target_type=debnetwork">website</a> first to find the right version for our system. The greatest way to install it is following the <a href="https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html">official guide</a>.</p>

<p>There is also a supportive <a href="https://mc.ai/easily-install-tensorflow-gpu-2-0-on-linux-ubuntu-18-04-cuda-10-cudnn-7-6-5/">tutorial</a> for installation cuda and cudnn for ubuntu.</p>

<h4 id="debian-cuda-install"><span class="mr-2">Debian CUDA install</span><a href="#debian-cuda-install" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>Recently, I need to install cuda11-1 and nvidia driver on debian 11. Here is something that I achieve based on the experience.</p>

<p>The key point is that the cuda package can be used smoothly on debian 11 from my testing.</p>

<p>The faster method is using <code class="language-plaintext highlighter-rouge">sudo apt install nvidia-cuda-toolkit </code>. However, it can just install the latest version. In my case, it will install cuda11-2 while torch cannot support such a new version.</p>

<p>Then I tried several methods on the internet. But the solution is just based on the previous method.</p>

<div class="language-shell highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>add-apt-repository ppa:graphics-drivers/ppa
<span class="nb">sudo </span>apt-get update
<span class="nb">sudo </span>apt <span class="nb">install </span>nvidia-driver


<span class="nb">sudo </span>apt-key adv <span class="nt">--fetch-keys</span>  http://developer.download.nvidia.com/compute/cuda/repos/debian10/x86_64/7fa2af80.pub

<span class="nb">sudo </span>bash <span class="nt">-c</span> <span class="s1">'echo "deb http://developer.download.nvidia.com/compute/cuda/repos/debian10/x86_64 /" &gt; /etc/apt/sources.list.d/cuda.list'</span>

<span class="nb">sudo </span>apt-get update
<span class="nb">sudo </span>apt <span class="nb">install </span>cuda-11-1

<span class="k">if</span> <span class="o">[</span> <span class="nt">-d</span> <span class="s2">"/usr/local/cuda/bin/"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span>/usr/local/cuda/bin<span class="k">${</span><span class="nv">PATH</span>:+:<span class="k">${</span><span class="nv">PATH</span><span class="k">}}</span>
    <span class="nb">export </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>/usr/local/cuda/lib64<span class="k">${</span><span class="nv">LD_LIBRARY_PATH</span>:+:<span class="k">${</span><span class="nv">LD_LIBRARY_PATH</span><span class="k">}}</span>
<span class="k">fi

</span>reboot <span class="nt">-i</span>
</pre></td></tr></tbody></table></code></div></div>

<p>Then just enjoy the new world.</p>

<h2 id="conda-usage"><span class="mr-2">Conda Usage</span><a href="#conda-usage" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h4 id="1-search-available-python-version"><span class="mr-2">1. search available python version</span><a href="#1-search-available-python-version" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">conda</span> <span class="n">search</span> <span class="s">"^python$"</span>
</pre></td></tr></tbody></table></code></div></div>

<h4 id="2-create-or-remove-conda-environment"><span class="mr-2">2. Create or Remove conda environment</span><a href="#2-create-or-remove-conda-environment" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<div class="language-shell highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>conda remove <span class="nt">--name</span> myenv <span class="nt">--all</span>
conda create <span class="nt">-n</span> <span class="nb">env </span><span class="nv">python</span><span class="o">==</span>3.6
</pre></td></tr></tbody></table></code></div></div>

<h2 id="tensorflow-usage-problem-recording"><span class="mr-2">Tensorflow Usage Problem Recording</span><a href="#tensorflow-usage-problem-recording" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h4 id="1-tensorflow-does-not-use-gpu"><span class="mr-2">1. Tensorflow does not use GPU</span><a href="#1-tensorflow-does-not-use-gpu" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>In the case, I actually installed cuda and Nvidia driver at first. So it is because I did not add <code class="language-plaintext highlighter-rouge">cuda/bin</code> and related library to the <code class="language-plaintext highlighter-rouge">.bashrc</code>.</p>

<p>By adding the following code to <code class="language-plaintext highlighter-rouge">.bashrc</code> file will solve the problem.</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span>/usr/local/cuda-10.2/bin/:<span class="nv">$PATH</span>
<span class="nb">export </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>/usr/local/cuda-10.2/lib64:<span class="k">${</span><span class="nv">LD_LIBRARY_PATH</span>:+:<span class="k">${</span><span class="nv">LD_LIBRARY_PATH</span><span class="k">}}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>Besides, I think it is a useful <a href="https://mc.ai/tensorflow-gpu-installation-on-ubuntu-18-04/">tutorial</a> for use Tensorflow on GPU.</p>

<p><strong>Tensorflow2.1 is not useful for CUDA10.2 due to the lack of some libraries.</strong></p>

<p>So I reinstall CUDA10.1 for tensorflow2.1-gpu.</p>

<p>Test tensorflow for GPU</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kn">import</span> <span class="n">tensorflow</span> <span class="k">as</span> <span class="n">tf</span>
<span class="n">tf</span><span class="p">.</span><span class="n">test</span><span class="p">.</span><span class="nf">is_gpu_available</span><span class="p">(</span><span class="n">cuda_only</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">min_cuda_compute_capability</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<h4 id="2-install-tensorrt-for-tensorflow2-gpu-version"><span class="mr-2">2. Install TensorRT for Tensorflow2-GPU version</span><a href="#2-install-tensorrt-for-tensorflow2-gpu-version" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>Official <a href="https://docs.nvidia.com/deeplearning/sdk/tensorrt-install-guide/index.html">tutorial</a>: TensorRT is not a must for tensorflow-gpu. It is just useful for speed up training process.</p>

<h4 id="3-change-cuda-version"><span class="mr-2">3. Change CUDA Version</span><a href="#3-change-cuda-version" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>ll /usr/local/cuda
<span class="c"># make a link for cuda. usage: ln -s source target</span>
<span class="nb">ln</span> <span class="nt">-s</span> /usr/local/cuda-7.5 /usr/local/cuda
</pre></td></tr></tbody></table></code></div></div>

<p><a href="https://stackoverflow.com/questions/45477133/how-to-change-cuda-version">Explanation</a></p>

<h4 id="4-cannot-visit-tensorfloworg-official-website"><span class="mr-2">4. Cannot visit <code class="language-plaintext highlighter-rouge">tensorflow.org</code> official website</span><a href="#4-cannot-visit-tensorfloworg-official-website" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>In the case, the following step is useful for Mac. Linux should edit its specific <code class="language-plaintext highlighter-rouge">hosts</code> file.</p>

<ol>
  <li>edit /private/etc/hosts</li>
  <li>add <code class="language-plaintext highlighter-rouge">64.233.188.121 www.tensorflow.org</code></li>
</ol>

<h4 id="5-tensorflow-gpu-allocation-problem"><span class="mr-2">5. Tensorflow GPU Allocation Problem</span><a href="#5-tensorflow-gpu-allocation-problem" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>By default, tensroflow will use all gpu memories to update efficiency. The way to use specific memory is by following codes in two ways. More details are available on the <a href="https://www.tensorflow.org/guide/gpu#limiting_gpu_memory_growth">link</a></p>

<p><code class="language-plaintext highlighter-rouge">tf.config.experimental.set_memory_growth</code>:</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="n">gpus</span> <span class="o">=</span> <span class="n">tf</span><span class="p">.</span><span class="n">config</span><span class="p">.</span><span class="n">experimental</span><span class="p">.</span><span class="nf">list_physical_devices</span><span class="p">(</span><span class="s">'GPU'</span><span class="p">)</span>
<span class="k">if</span> <span class="n">gpus</span><span class="p">:</span>
  <span class="k">try</span><span class="p">:</span>
    <span class="c1"># Currently, memory growth needs to be the same across GPUs
</span>    <span class="k">for</span> <span class="n">gpu</span> <span class="ow">in</span> <span class="n">gpus</span><span class="p">:</span>
      <span class="n">tf</span><span class="p">.</span><span class="n">config</span><span class="p">.</span><span class="n">experimental</span><span class="p">.</span><span class="nf">set_memory_growth</span><span class="p">(</span><span class="n">gpu</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
    <span class="n">logical_gpus</span> <span class="o">=</span> <span class="n">tf</span><span class="p">.</span><span class="n">config</span><span class="p">.</span><span class="n">experimental</span><span class="p">.</span><span class="nf">list_logical_devices</span><span class="p">(</span><span class="s">'GPU'</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="nf">len</span><span class="p">(</span><span class="n">gpus</span><span class="p">),</span> <span class="s">"Physical GPUs,"</span><span class="p">,</span> <span class="nf">len</span><span class="p">(</span><span class="n">logical_gpus</span><span class="p">),</span> <span class="s">"Logical GPUs"</span><span class="p">)</span>
  <span class="k">except</span> <span class="nb">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="c1"># Memory growth must be set before GPUs have been initialized
</span>    <span class="nf">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<p><code class="language-plaintext highlighter-rouge">tf.config.experimental.set_virtual_device_configuration</code>:</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="n">gpus</span> <span class="o">=</span> <span class="n">tf</span><span class="p">.</span><span class="n">config</span><span class="p">.</span><span class="n">experimental</span><span class="p">.</span><span class="nf">list_physical_devices</span><span class="p">(</span><span class="s">'GPU'</span><span class="p">)</span>
<span class="k">if</span> <span class="n">gpus</span><span class="p">:</span>
  <span class="c1"># Restrict TensorFlow to only allocate 1GB of memory on the first GPU
</span>  <span class="k">try</span><span class="p">:</span>
    <span class="n">tf</span><span class="p">.</span><span class="n">config</span><span class="p">.</span><span class="n">experimental</span><span class="p">.</span><span class="nf">set_virtual_device_configuration</span><span class="p">(</span>
        <span class="n">gpus</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
        <span class="p">[</span><span class="n">tf</span><span class="p">.</span><span class="n">config</span><span class="p">.</span><span class="n">experimental</span><span class="p">.</span><span class="nc">VirtualDeviceConfiguration</span><span class="p">(</span><span class="n">memory_limit</span><span class="o">=</span><span class="mi">1024</span><span class="p">)])</span>
    <span class="n">logical_gpus</span> <span class="o">=</span> <span class="n">tf</span><span class="p">.</span><span class="n">config</span><span class="p">.</span><span class="n">experimental</span><span class="p">.</span><span class="nf">list_logical_devices</span><span class="p">(</span><span class="s">'GPU'</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="nf">len</span><span class="p">(</span><span class="n">gpus</span><span class="p">),</span> <span class="s">"Physical GPUs,"</span><span class="p">,</span> <span class="nf">len</span><span class="p">(</span><span class="n">logical_gpus</span><span class="p">),</span> <span class="s">"Logical GPUs"</span><span class="p">)</span>
  <span class="k">except</span> <span class="nb">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="c1"># Virtual devices must be set before GPUs have been initialized
</span>    <span class="nf">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<h4 id="6-pytorch-jupyter-set-gpu"><span class="mr-2">6. Pytorch Jupyter set GPU</span><a href="#6-pytorch-jupyter-set-gpu" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nf">print</span><span class="p">(</span><span class="n">torch</span><span class="p">.</span><span class="n">cuda</span><span class="p">.</span><span class="nf">device_count</span><span class="p">())</span> <span class="c1"># list visible GPU
</span><span class="n">device</span> <span class="o">=</span> <span class="n">torch</span><span class="p">.</span><span class="nf">device</span><span class="p">(</span><span class="s">"cuda:6"</span> <span class="k">if</span> <span class="n">torch</span><span class="p">.</span><span class="n">cuda</span><span class="p">.</span><span class="nf">is_available</span><span class="p">()</span> <span class="k">else</span> <span class="s">"cpu"</span><span class="p">)</span> <span class="c1"># set GPU for device
</span><span class="n">model_ft</span> <span class="o">=</span> <span class="n">torch</span><span class="p">.</span><span class="n">nn</span><span class="p">.</span><span class="nc">DataParallel</span><span class="p">(</span><span class="n">model_ft</span><span class="p">,</span> <span class="n">device_ids</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="c1"># set GPU for models
</span></pre></td></tr></tbody></table></code></div></div>

<h4 id="7-data-loader-problem"><span class="mr-2">7. Data Loader Problem</span><a href="#7-data-loader-problem" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="n">raw_train_X</span> <span class="o">=</span> <span class="nf">next</span><span class="p">(</span><span class="nf">iter</span><span class="p">(</span><span class="n">train_dataloader</span><span class="p">))[</span><span class="mi">0</span><span class="p">].</span><span class="nf">numpy</span><span class="p">()</span> <span class="c1"># (100000, 3, 64, 64)
</span><span class="n">raw_train_Y</span> <span class="o">=</span> <span class="nf">next</span><span class="p">(</span><span class="nf">iter</span><span class="p">(</span><span class="n">train_dataloader</span><span class="p">))[</span><span class="mi">1</span><span class="p">].</span><span class="nf">numpy</span><span class="p">()</span> <span class="c1"># (100000, )
</span></pre></td></tr></tbody></table></code></div></div>

<p>The aforementioned code is not right because <code class="language-plaintext highlighter-rouge">next(iter(dataloader))</code> will re-output so the X and Y are not mapping.</p>

<h4 id="8-check-label-counts"><span class="mr-2">8. Check label counts</span><a href="#8-check-label-counts" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="n">unique</span><span class="p">,</span> <span class="n">counts</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">unique</span><span class="p">(</span><span class="n">sy_train</span><span class="p">,</span> <span class="n">return_counts</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">counts</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<h4 id="9-allocation-problem"><span class="mr-2">9. Allocation problem</span><a href="#9-allocation-problem" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>Warning: <code class="language-plaintext highlighter-rouge">ensorflow/core/framework/allocator.cc:101] Allocation of X exceeds 10% of system memory</code></p>

<p>Solution: The main problem is the <code class="language-plaintext highlighter-rouge">batch_size</code> is too big. Sometimes the problem is on related settings like <code class="language-plaintext highlighter-rouge">shuffle</code> function in<code class="language-plaintext highlighter-rouge">tf.data.Dataset.from_tensor_slices((x_train, y_train)).shuffle()</code>.</p>

<h4 id="10-how-to-use-tffunction-need-digging-into"><span class="mr-2">10. How to use <code class="language-plaintext highlighter-rouge">@tf.function</code> [Need Digging into]</span><a href="#10-how-to-use-tffunction-need-digging-into" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>When I want to change the gradients when training by function <code class="language-plaintext highlighter-rouge">train_step</code> on tensorflow2, I found that if I did not use <code class="language-plaintext highlighter-rouge">@tf.function</code> before the <code class="language-plaintext highlighter-rouge">train_step</code> function, the accuracy grow very slow. But if I add <code class="language-plaintext highlighter-rouge">@tf.function</code>, the process becomes normal without considering optimizers and data type. The related code is here.</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="nd">@tf.function</span>
<span class="k">def</span> <span class="nf">fix_train_step</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">images</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">all_mask</span><span class="p">):</span>
  <span class="k">with</span> <span class="n">tf</span><span class="p">.</span><span class="nc">GradientTape</span><span class="p">()</span> <span class="k">as</span> <span class="n">tape</span><span class="p">:</span>
    <span class="n">predictions</span> <span class="o">=</span> <span class="nf">model</span><span class="p">(</span><span class="n">images</span><span class="p">)</span>
    <span class="n">loss</span> <span class="o">=</span> <span class="nf">loss_object</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="n">predictions</span><span class="p">)</span>
  <span class="n">gradients</span> <span class="o">=</span> <span class="n">tape</span><span class="p">.</span><span class="nf">gradient</span><span class="p">(</span><span class="n">loss</span><span class="p">,</span> <span class="n">model</span><span class="p">.</span><span class="n">trainable_variables</span><span class="p">)</span>
  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="nf">len</span><span class="p">(</span><span class="n">all_mask</span><span class="p">)):</span>
    <span class="n">gradients</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">gradients</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">all_mask</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
  <span class="n">optimizer</span><span class="p">.</span><span class="nf">apply_gradients</span><span class="p">(</span><span class="nf">zip</span><span class="p">(</span><span class="n">gradients</span><span class="p">,</span> <span class="n">model</span><span class="p">.</span><span class="n">trainable_variables</span><span class="p">))</span>
  <span class="nf">train_loss</span><span class="p">(</span><span class="n">loss</span><span class="p">)</span>
  <span class="nf">train_accuracy</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="n">predictions</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<h4 id="11-problem-after-suspending-the-machine"><span class="mr-2">11. Problem after suspending the Machine</span><a href="#11-problem-after-suspending-the-machine" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>After I suspend the ubuntu, I met with such problem<code class="language-plaintext highlighter-rouge">failed call to cuInit: CUDA_ERROR_UNKNOWN</code> and I cannot use GPU. Rebooting it probably can solve the problem. As to my case, I reinstall nvidia-smi 440 solve the problem.</p>

<p>Related <a href="https://github.com/tensorflow/tensorflow/issues/394#">link</a></p>

<h4 id="12-save-model-problem-in-tensorflow2"><span class="mr-2">12. Save Model Problem in Tensorflow2</span><a href="#12-save-model-problem-in-tensorflow2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>When I want to save a Keras subclass model, it will meet with the no bounded node error when I want to use tf.keras.models.Model to get middle layersâ€™ output. So in tensorflow 2, the suitable way to save and load model is listed as follows.</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="c1"># save model weights
</span><span class="n">model</span><span class="p">.</span><span class="nf">save_weights</span><span class="p">(</span><span class="n">MODEL_FILEPATH</span> <span class="o">+</span> <span class="s">'weight.h5'</span><span class="p">)</span>
<span class="n">model</span><span class="p">.</span><span class="nf">load_weights</span><span class="p">(</span><span class="n">MODEL_FILEPATH</span> <span class="o">+</span> <span class="s">"weight.h5"</span><span class="p">)</span>

<span class="c1"># save whole model
</span><span class="n">tf</span><span class="p">.</span><span class="n">keras</span><span class="p">.</span><span class="n">models</span><span class="p">.</span><span class="nf">save_model</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">MODEL_FILEPATH</span><span class="p">)</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">load_weights</span><span class="p">(</span><span class="n">MODEL_FILEPATH</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<h4 id="13-check-gpu-is-available-or-not-on-tensorflow"><span class="mr-2">13. Check GPU is available or not on tensorflow:</span><a href="#13-check-gpu-is-available-or-not-on-tensorflow" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p><code class="language-plaintext highlighter-rouge">print("Num GPUs Available: ", len(tf.config.experimental.list_physical_devices('GPU')))
tf.config.list_physical_devices('GPU')</code></p>

<p>The version compatible version of Tensorflow <a href="https://www.tensorflow.org/install/source#linux">details</a>.</p>

<h2 id="other-problems"><span class="mr-2">Other Problems</span><a href="#other-problems" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h4 id="1-install-cudnn-on-debian"><span class="mr-2">1. Install Cudnn on Debian</span><a href="#1-install-cudnn-on-debian" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>The installation steps of installing cudnn on debian is different from that of ubuntu. And the path of cuda related package is not the same of that of ubuntu.</p>

<p>Step 1: Download Cudnn on <a href="https://developer.nvidia.com/rdp/cudnn-download">Nvidia official website</a>.</p>

<p>Step 2: Add the related lib to the path <code class="language-plaintext highlighter-rouge">./usr/lib/x86_64-linux-gnu/</code>. A good way to find the path is by <code class="language-plaintext highlighter-rouge">find . -name libcublas.so.10</code>.</p>

<p>Step 3: Check the result of installation of cudnn.</p>

<h4 id="2-use-matplotlib-to-draw-3d-gradient-descent-pictures"><span class="mr-2">2. Use matplotlib to draw 3D gradient descent pictures</span><a href="#2-use-matplotlib-to-draw-3d-gradient-descent-pictures" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
</pre></td><td class="rouge-code"><pre><span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="n">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">from</span> <span class="n">ipywidgets</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="n">mpl_toolkits</span> <span class="kn">import</span> <span class="n">mplot3d</span> <span class="c1">#ç”¨äºŽç»˜åˆ¶3Då›¾å½¢
</span>

<span class="c1">#æ¢¯åº¦å‡½æ•°çš„å¯¼æ•°
</span><span class="k">def</span> <span class="nf">gradJ1</span><span class="p">(</span><span class="n">theta</span><span class="p">):</span>
    <span class="k">return</span> <span class="mi">4</span><span class="o">*</span><span class="n">theta</span>
<span class="k">def</span> <span class="nf">gradJ2</span><span class="p">(</span><span class="n">theta</span><span class="p">):</span>
    <span class="k">return</span> <span class="mi">2</span><span class="o">*</span><span class="n">theta</span>

<span class="c1">#æ¢¯åº¦å‡½æ•°
</span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">return</span>  <span class="mi">2</span><span class="o">*</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span><span class="n">y</span><span class="o">**</span><span class="mi">2</span>

<span class="k">def</span> <span class="nf">ff</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="p">.</span><span class="nf">power</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="o">+</span><span class="n">np</span><span class="p">.</span><span class="nf">power</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">train</span><span class="p">(</span><span class="n">lr</span><span class="p">,</span><span class="n">epoch</span><span class="p">,</span><span class="n">theta1</span><span class="p">,</span><span class="n">theta2</span><span class="p">,</span><span class="n">up</span><span class="p">,</span><span class="n">dirc</span><span class="p">):</span>
    <span class="n">t1</span> <span class="o">=</span> <span class="p">[</span><span class="n">theta1</span><span class="p">]</span>
    <span class="n">t2</span> <span class="o">=</span> <span class="p">[</span><span class="n">theta2</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">epoch</span><span class="p">):</span>
        <span class="n">gradient</span> <span class="o">=</span> <span class="nf">gradJ1</span><span class="p">(</span><span class="n">theta1</span><span class="p">)</span>
        <span class="n">theta1</span> <span class="o">=</span> <span class="n">theta1</span> <span class="o">-</span> <span class="n">lr</span><span class="o">*</span><span class="n">gradient</span>
        <span class="n">t1</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">theta1</span><span class="p">)</span>
        <span class="n">gradient</span> <span class="o">=</span> <span class="nf">gradJ2</span><span class="p">(</span><span class="n">theta2</span><span class="p">)</span>
        <span class="n">theta2</span> <span class="o">=</span> <span class="n">theta2</span> <span class="o">-</span> <span class="n">lr</span><span class="o">*</span><span class="n">gradient</span>
        <span class="n">t2</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">theta2</span><span class="p">)</span>

    <span class="n">plt</span><span class="p">.</span><span class="nf">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>     <span class="c1">#è®¾ç½®ç”»å¸ƒå¤§å°
</span>    <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span>
    <span class="n">X</span><span class="p">,</span> <span class="n">Y</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">meshgrid</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="n">Z</span> <span class="o">=</span> <span class="nf">f</span><span class="p">(</span><span class="n">X</span><span class="p">,</span><span class="n">Y</span><span class="p">)</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="nf">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="s">'3d'</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="nf">ff</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span><span class="n">t2</span><span class="p">))</span>
<span class="c1">#     ax.scatter(t1, t2, ff(t1,t2), c='black',marker = '*', linewidth=1)
</span>
    <span class="n">ax</span><span class="p">.</span><span class="nf">plot_surface</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">Z</span><span class="p">,</span> <span class="n">rstride</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">cstride</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s">'viridis'</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s">'none'</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.9</span><span class="p">)</span> <span class="c1">#æ›²é¢å›¾
</span>    <span class="c1">#ax.plot_wireframe(X, Y, Z, color='c') #çº¿æ¡†å›¾
#     ax.contour3D(X, Y, Z, 50, cmap='binary')#ç­‰é«˜çº¿å›¾
#     ax.scatter3D(t1, t2, ff(t1,t2), c='black',marker = 'o')
</span>    <span class="n">ax</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="nf">ff</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span><span class="n">t2</span><span class="p">),</span> <span class="n">c</span><span class="o">=</span><span class="s">'black'</span><span class="p">,</span><span class="n">marker</span> <span class="o">=</span> <span class="s">'o'</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="c1">#     ax.plot_wireframe(t1, t2, ff(t1,t2))
#     ax.plot3D(t1, t2,  ff(t1,t2),'red')
</span>    <span class="c1">#è°ƒæ•´è§‚å¯Ÿè§’åº¦å’Œæ–¹ä½è§’ã€‚è¿™é‡Œå°†ä¿¯ä»°è§’è®¾ä¸º60åº¦ï¼ŒæŠŠæ–¹ä½è§’è°ƒæ•´ä¸º35åº¦
</span>    <span class="n">ax</span><span class="p">.</span><span class="nf">view_init</span><span class="p">(</span><span class="n">up</span><span class="p">,</span> <span class="n">dirc</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="nf">savefig</span><span class="p">(</span><span class="s">"./temp.png"</span><span class="p">)</span>

<span class="c1">#å¯ä»¥éšæ—¶è°ƒèŠ‚ï¼ŒæŸ¥çœ‹æ•ˆæžœ (æœ€å°å€¼ï¼Œæœ€å¤§å€¼ï¼Œæ­¥é•¿)
</span><span class="nd">@interact</span><span class="p">(</span><span class="n">lr</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">0.0002</span><span class="p">),</span><span class="n">epoch</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">init_theta1</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mf">0.1</span><span class="p">),</span><span class="n">init_theta2</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mf">0.1</span><span class="p">),</span><span class="n">up</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span><span class="mi">180</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">dirc</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span><span class="mi">180</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">continuous_update</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="c1">#lrä¸ºå­¦ä¹ çŽ‡ï¼ˆæ­¥é•¿ï¼‰ epochä¸ºè¿­ä»£æ¬¡æ•°   init_thetaä¸ºåˆå§‹å‚æ•°çš„è®¾ç½® upè°ƒæ•´å›¾ç‰‡ä¸Šä¸‹è§†è§’ dircè°ƒæ•´å·¦å³è§†è§’
</span><span class="k">def</span> <span class="nf">visualize_gradient_descent</span><span class="p">(</span><span class="n">lr</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span><span class="n">epoch</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">init_theta1</span><span class="o">=-</span><span class="mi">2</span><span class="p">,</span><span class="n">init_theta2</span><span class="o">=-</span><span class="mi">3</span><span class="p">,</span><span class="n">up</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span><span class="n">dirc</span><span class="o">=</span><span class="mi">60</span><span class="p">):</span>
    <span class="nf">train</span><span class="p">(</span><span class="n">lr</span><span class="p">,</span><span class="n">epoch</span><span class="p">,</span><span class="n">init_theta1</span><span class="p">,</span><span class="n">init_theta2</span><span class="p">,</span><span class="n">up</span><span class="p">,</span><span class="n">dirc</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<h4 id="3-git-add-new-repo"><span class="mr-2">3. git add new repo</span><a href="#3-git-add-new-repo" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p><a href="https://docs.github.com/en/github/importing-your-projects-to-github/adding-an-existing-project-to-github-using-the-command-line">link</a></p>

<h4 id="4-out-of-memory-on-pytorch"><span class="mr-2">4. Out of memory on Pytorch</span><a href="#4-out-of-memory-on-pytorch" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>When trainingï¼Œ memory usage of GPU will increase by calculating loss, output. So delete them when they are useless is a suitable way to decrease memory usage.</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="k">del</span> <span class="n">cost</span><span class="p">,</span> <span class="n">out</span>
<span class="nf">print</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">all"</span><span class="p">,</span> <span class="n">torch</span><span class="p">.</span><span class="n">cuda</span><span class="p">.</span><span class="nf">memory_allocated</span><span class="p">())</span>
</pre></td></tr></tbody></table></code></div></div>

<h4 id="5-mac-new-application-damaged-problem"><span class="mr-2">5. Mac New Application Damaged Problem</span><a href="#5-mac-new-application-damaged-problem" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p><a href="https://qiujunya.com/article/2019/6/15/5.html">link</a></p>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">sudo spctl --master-disable</code></p>

    <ul>
      <li>Enable it again: <code class="language-plaintext highlighter-rouge">sudo spctl --master-enable</code></li>
    </ul>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">xattr -r -d com.apple.quarantine &lt;path&gt;</code></p>

    <ul>
      <li>` xattr -r -d com.apple.quarantine /Applications/PDF\ Expert.app`</li>
    </ul>
  </li>
</ol>

<h4 id="6-display-the-pictures-from-the-remote-ubuntu-on-the-local-server"><span class="mr-2">6. Display the pictures from the remote ubuntu on the local server</span><a href="#6-display-the-pictures-from-the-remote-ubuntu-on-the-local-server" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p><a href="https://stackoverflow.com/questions/3453188/matplotlib-display-plot-on-a-remote-machine">link</a></p>

<ol>
  <li>Install <code class="language-plaintext highlighter-rouge">xquartz</code> on mac from the <a href="https://www.xquartz.org/">link</a>.</li>
  <li>Use <code class="language-plaintext highlighter-rouge">ssh -X &lt;remote server&gt;</code> to enable x11 forwarding</li>
  <li>Run python script with <code class="language-plaintext highlighter-rouge">matplotlib</code> to build the connection.</li>
</ol>

<p>Enable OpenCL
Problems:</p>

<ol>
  <li><a href="https://www.scm.com/doc/Installation/Remote_GUI.html#opengl-direct-or-indirect-rendering">link</a></li>
</ol>

<pre><code class="language-Shell">libGL error: No matching fbConfigs or visuals found
libGL error: failed to load driver: swrast
</code></pre>

<p>set parameters:
<code class="language-plaintext highlighter-rouge">export LIBGL_ALWAYS_INDIRECT=1</code>
export LIBGL_DEBUG=verbose
export LIBGL_ALWAYS_SOFTWARE=1</p>

<ol>
  <li>Open3d Problem</li>
</ol>

<pre><code class="language-Shell">[Open3D WARNING] GLFW Error: GLX: Forward compatibility requested but GLX_ARB_create_context_profile is unavailable
[Open3D WARNING] Failed to create window
[Open3D WARNING] [DrawGeometries] Failed creating OpenGL window.
</code></pre>

<p>clinfo
glxinfo: OpenGL version string: 1.4 (2.1 INTEL-16.1.7) Need to be change to nvidia driver
command:</p>

<div class="language-shell highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>nvidia-settings
<span class="nb">sudo </span>prime-select nvidia
</pre></td></tr></tbody></table></code></div></div>

<p><a href="https://www.linuxbabe.com/desktop-linux/switch-intel-nvidia-graphics-card-ubuntu">link</a></p>

<p>opengl version with GPU
https://opengl.gpuinfo.org/displayreport.php?id=5738</p>

<h4 id="7-how-to-install-a-editable-python-package"><span class="mr-2">7. How to install a editable python package</span><a href="#7-how-to-install-a-editable-python-package" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p><a href="https://realpython.com/python-import/#create-and-install-a-local-package">Detailed Tutorial</a></p>

<p>Basically, <code class="language-plaintext highlighter-rouge">setup.cfg</code> and <code class="language-plaintext highlighter-rouge">setup.py</code> are configured for the editable package.</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="c1"># setup.cfg
</span>
<span class="p">[</span><span class="n">metadata</span><span class="p">]</span>
<span class="n">name</span> <span class="o">=</span> <span class="n">local_structure</span>
<span class="n">version</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">.</span><span class="mi">0</span>

<span class="p">[</span><span class="n">options</span><span class="p">]</span>
<span class="n">packages</span> <span class="o">=</span> <span class="n">structure</span>

<span class="c1"># setup.py
</span>
<span class="kn">import</span> <span class="n">setuptools</span>

<span class="n">setuptools</span><span class="p">.</span><span class="nf">setup</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></div></div>

<p>And then use the following command to install the package locally under the package folder: <code class="language-plaintext highlighter-rouge">python -m pip install -e .</code></p>

<h4 id="8-the-information-about-the-file-system-and-the-cooresponding-operating-system"><span class="mr-2">8. The Information about the file system and the cooresponding operating system</span><a href="#8-the-information-about-the-file-system-and-the-cooresponding-operating-system" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p><strong>Linux</strong>:</p>

<ul>
  <li>
    <p>Best Recommands: Ext4</p>
  </li>
  <li>
    <p>Do not support: Exfat, Fat</p>
  </li>
</ul>

<p><strong>Mac</strong>:</p>

<ul>
  <li>
    <p>Do not support: Ext4</p>
  </li>
  <li>
    <p>Need kernel extension: <a href="https://github.com/osxfuse/osxfuse">NTFS</a></p>
  </li>
  <li>
    <p><del><a href="https://ggg.re/macos-mkfs-ext4">How to format a disk to Ext4</a></del></p>
  </li>
</ul>

<p>å¦‚æžœæ²¡æœ‰ Homebrew çš„è¯ï¼Œéœ€è¦å…ˆå®‰è£… Homebrewï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="code-header">
        <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
</pre></td></tr></tbody></table></code></div></div>

<p>å®‰è£… e2fsprogs</p>

<div class="language-plaintext highlighter-rouge"><div class="code-header">
        <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>brew install e2fsprogs
</pre></td></tr></tbody></table></code></div></div>

<p>æŠŠ U ç›˜æ’åˆ° Mac ä¸Šï¼Œæ‰§è¡Œï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="code-header">
        <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>diskutil list
</pre></td></tr></tbody></table></code></div></div>

<p>æ‰¾åˆ°è‡ªå·± U ç›˜çš„ç›˜ç¬¦ï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œæ˜¯ï¼š/dev/disk2s1ï¼Œ</p>

<div class="language-plaintext highlighter-rouge"><div class="code-header">
        <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>/dev/disk2 (external, physical):
   #:                       TYPE NAME                    SIZE       IDENTIFIER
   0:     FDisk_partition_scheme                        *31.0 GB    disk2
   1:                 DOS_FAT_32 KINGSTON                31.0 GB    disk2s1
</pre></td></tr></tbody></table></code></div></div>

<p>ç„¶åŽæ‰§è¡Œæ ¼å¼åŒ–ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="code-header">
        <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>diskutil unmountdisk /dev/disk2s1
sudo $(brew --prefix e2fsprogs)/sbin/mkfs.ext4 /dev/disk2s1
</pre></td></tr></tbody></table></code></div></div>

<p>æ‰§è¡Œå‘½ä»¤åŽä¼šè¦æ±‚è¾“å…¥ç”¨æˆ·å¯†ç ï¼Œç„¶åŽè¾“å…¥ y ç¡®è®¤ï¼Œç­‰å¾…ä¸€ä¼šå„¿å°±å¯ä»¥äº†ã€‚</p>

<h4 id="9-the-related-things-about-external-disk-on-ubuntu"><span class="mr-2">9. The Related things about external disk on Ubuntu</span><a href="#9-the-related-things-about-external-disk-on-ubuntu" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>When we mount a NTFS external disk on Ubuntu, all the files are owned by root and the priviledge is not able to be changed. That will leads to some priviledge problems when using softwares in it.</p>

<p>So the most suitable way is using an Ext4 external disk for Ubuntu.</p>

<h4 id="10-latex-one-table-covers-two-columns"><span class="mr-2">10. latex one table covers two columns</span><a href="#10-latex-one-table-covers-two-columns" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p><a href="https://tex.stackexchange.com/questions/3527/put-a-table-at-the-bottom-of-a-page">link</a></p>

<div class="language-latex highlighter-rouge"><div class="code-header">
        <span data-label-text="LaTex"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="rouge-code"><pre><span class="k">\usepackage</span><span class="p">{</span>stfloats<span class="p">}</span>

<span class="nt">\begin{table*}</span>[tp]
    <span class="k">\centering</span>
    <span class="nt">\begin{tabular}</span><span class="p">{</span>c|ccc|ccc|ccc|ccc<span class="p">}</span>
    <span class="k">\hline</span>
    <span class="k">\multirow</span><span class="p">{</span>2<span class="p">}{</span>*<span class="p">}{</span>Case<span class="p">}</span> <span class="p">&amp;</span> <span class="k">\multicolumn</span><span class="p">{</span>3<span class="p">}{</span>c<span class="p">}{</span>PointNet++(Random)<span class="p">}</span> <span class="p">&amp;</span> <span class="k">\multicolumn</span><span class="p">{</span>3<span class="p">}{</span>c<span class="p">}{</span>PointNet++(<span class="k">\Mname</span>)<span class="p">}</span> <span class="p">&amp;</span> <span class="k">\multicolumn</span><span class="p">{</span>3<span class="p">}{</span>c<span class="p">}{</span>ResGCN-28(Random)<span class="p">}</span> <span class="p">&amp;</span> <span class="k">\multicolumn</span><span class="p">{</span>3<span class="p">}{</span>c<span class="p">}{</span>ResGCN-28(<span class="k">\Mname</span>)<span class="p">}</span> <span class="k">\\</span>

    <span class="p">&amp;</span> <span class="p">$</span><span class="nb">L</span><span class="p">_</span><span class="m">2</span><span class="p">$</span> <span class="p">&amp;</span> Acc <span class="p">&amp;</span> mIoU <span class="p">&amp;</span> <span class="p">$</span><span class="nb">L</span><span class="p">_</span><span class="m">2</span><span class="p">$</span> <span class="p">&amp;</span> Acc <span class="p">&amp;</span> mIoU  <span class="p">&amp;</span> <span class="p">$</span><span class="nb">L</span><span class="p">_</span><span class="m">2</span><span class="p">$</span> <span class="p">&amp;</span> Acc <span class="p">&amp;</span> mIoU  <span class="p">&amp;</span> <span class="p">$</span><span class="nb">L</span><span class="p">_</span><span class="m">2</span><span class="p">$</span> <span class="p">&amp;</span> Acc <span class="p">&amp;</span> mIoU  <span class="k">\\</span>
    <span class="k">\hline</span>
    <span class="k">\hline</span>
    Best    <span class="p">&amp;</span> <span class="k">\\</span>
    Average <span class="p">&amp;</span> <span class="k">\\</span>
    Worst   <span class="p">&amp;</span> <span class="k">\\</span>
    <span class="k">\hline</span>
    <span class="nt">\end{tabular}</span>
    <span class="k">\caption</span><span class="p">{</span>The results of the non-targeted attack.<span class="p">}</span>
    <span class="k">\label</span><span class="p">{</span>tab:nt-performance<span class="p">}</span>
<span class="nt">\end{table*}</span>
</pre></td></tr></tbody></table></code></div></div>

<h4 id="11-oh-my-zsh-completions-commands-with-repeated-words"><span class="mr-2">11. Oh-my-zsh completions commands with repeated words</span><a href="#11-oh-my-zsh-completions-commands-with-repeated-words" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p><a href="https://github.com/ohmyzsh/ohmyzsh/issues/5157#issuecomment-226031519">link</a></p>

<h4 id="12-download-bilibili-video-automatically"><span class="mr-2">12. Download Bilibili video automatically</span><a href="#12-download-bilibili-video-automatically" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p><code class="language-plaintext highlighter-rouge">you-get -l https://www.bilibili.com/video/BV1U7411a7xG\?p\=20 --debug</code></p>

<p>Use you-get command. The syntax is listed as follows:</p>

<div class="language-shell highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
</pre></td><td class="rouge-code"><pre>usage: you-get <span class="o">[</span>OPTION]... URL...

A tiny downloader that scrapes the web

optional arguments:
  <span class="nt">-V</span>, <span class="nt">--version</span>         Print version and <span class="nb">exit</span>
  <span class="nt">-h</span>, <span class="nt">--help</span>            Print this <span class="nb">help </span>message and <span class="nb">exit

</span>Dry-run options:
  <span class="o">(</span>no actual downloading<span class="o">)</span>

  <span class="nt">-i</span>, <span class="nt">--info</span>            Print extracted information
  <span class="nt">-u</span>, <span class="nt">--url</span>             Print extracted information with URLs
  <span class="nt">--json</span>                Print extracted URLs <span class="k">in </span>JSON format

Download options:
  <span class="nt">-n</span>, <span class="nt">--no-merge</span>        Do not merge video parts
  <span class="nt">--no-caption</span>          Do not download captions <span class="o">(</span>subtitles, lyrics, danmaku, ...<span class="o">)</span>
  <span class="nt">-f</span>, <span class="nt">--force</span>           Force overwriting existing files
  <span class="nt">--skip-existing-file-size-check</span>
                        Skip existing file without checking file size
  <span class="nt">-F</span> STREAM_ID, <span class="nt">--format</span> STREAM_ID
                        Set video format to STREAM_ID
  <span class="nt">-O</span> FILE, <span class="nt">--output-filename</span> FILE
                        Set output filename
  <span class="nt">-o</span> DIR, <span class="nt">--output-dir</span> DIR
                        Set output directory
  <span class="nt">-p</span> PLAYER, <span class="nt">--player</span> PLAYER
                        Stream extracted URL to a PLAYER
  <span class="nt">-c</span> COOKIES_FILE, <span class="nt">--cookies</span> COOKIES_FILE
                        Load cookies.txt or cookies.sqlite
  <span class="nt">-t</span> SECONDS, <span class="nt">--timeout</span> SECONDS
                        Set socket <span class="nb">timeout</span>
  <span class="nt">-d</span>, <span class="nt">--debug</span>           Show traceback and other debug info
  <span class="nt">-I</span> FILE, <span class="nt">--input-file</span> FILE
                        Read non-playlist URLs from FILE
  <span class="nt">-P</span> PASSWORD, <span class="nt">--password</span> PASSWORD
                        Set video visit password to PASSWORD
  <span class="nt">-l</span>, <span class="nt">--playlist</span>        Prefer to download a playlist
  <span class="nt">-a</span>, <span class="nt">--auto-rename</span>     Auto rename same name different files
  <span class="nt">-k</span>, <span class="nt">--insecure</span>        ignore ssl errors

Proxy options:
  <span class="nt">-x</span> HOST:PORT, <span class="nt">--http-proxy</span> HOST:PORT
                        Use an HTTP proxy <span class="k">for </span>downloading
  <span class="nt">-y</span> HOST:PORT, <span class="nt">--extractor-proxy</span> HOST:PORT
                        Use an HTTP proxy <span class="k">for </span>extracting only
  <span class="nt">--no-proxy</span>            Never use a proxy
  <span class="nt">-s</span> HOST:PORT, <span class="nt">--socks-proxy</span> HOST:PORT
                        Use an SOCKS5 proxy <span class="k">for </span>downloading
</pre></td></tr></tbody></table></code></div></div>

<h4 id="13-recovery-the-deleted-files-on-ubuntu"><span class="mr-2">13. Recovery the deleted files on Ubuntu</span><a href="#13-recovery-the-deleted-files-on-ubuntu" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p><a href="https://vitux.com/how-to-recover-deleted-files-in-ubuntu-through-testdisk/">testdisk</a></p>

<h4 id="14-how-to-set-the-local-mac-to-proxy-the-ubuntu-servers-packages"><span class="mr-2">14. How to set the local Mac to proxy the Ubuntu serverâ€™s packages</span><a href="#14-how-to-set-the-local-mac-to-proxy-the-ubuntu-servers-packages" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>Step 1: Open Macâ€™s SSH service and Farword configure.</p>

<p>Step 2: Set Ubuntu proxy config</p>

<div class="language-shell highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="c"># add the following two lines on the ~/.bashrc</span>
<span class="nb">export </span><span class="nv">https_proxy</span><span class="o">=</span>127.0.0.1:1234
<span class="nb">export </span><span class="nv">http_proxy</span><span class="o">=</span>127.0.0.1:1234

<span class="c"># set the ssh channel, 7890 is the VPN proxy port</span>
ssh <span class="nt">-N</span> <span class="nt">-f</span> <span class="nt">-L</span> localhost:1234:localhost:7890 jason@10.177.74.47&lt;<span class="nb">local </span>machine ssh service&gt;

<span class="c"># check the port-using process</span>
lsof <span class="nt">-ti</span>:1234

<span class="c"># check the vpn service</span>
curl <span class="nt">-I</span> https://google.com
</pre></td></tr></tbody></table></code></div></div>

<h4 id="15-a-fast-way-to-transfer-files-between-remote-servers-with-progress-bar"><span class="mr-2">15. A fast way to transfer files between remote servers with progress bar</span><a href="#15-a-fast-way-to-transfer-files-between-remote-servers-with-progress-bar" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p><a href="https://www.cyberciti.biz/faq/show-progress-during-file-transfer/"><strong>rsync</strong></a></p>

<div class="language-shell highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>rsync <span class="nt">-r</span> <span class="nt">--info</span><span class="o">=</span>progress2 &lt;files path&gt; &lt;username@remote server&gt; 
</pre></td></tr></tbody></table></code></div></div>

<h4 id="16-jupyter-cannot-use-the-specific-environment-of-conda"><span class="mr-2">16. Jupyter cannot use the specific environment of conda</span><a href="#16-jupyter-cannot-use-the-specific-environment-of-conda" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>A helpful <a href="https://ipython.readthedocs.io/en/stable/install/kernel_install.html#kernels-for-different-environments">link</a>.</p>

<p>Basically, the main problem is that the system does not use the <code class="language-plaintext highlighter-rouge">jupyter</code> command in the conda environment. Instead, it uses the system default version.</p>

<p>We can use the <code class="language-plaintext highlighter-rouge">sys.path</code> to check whether we use the correct command or not.</p>

<p>If the result of <code class="language-plaintext highlighter-rouge">sys.path</code> is like the following, the environment is correct.</p>

<div class="language-json highlighter-rouge"><div class="code-header">
        <span data-label-text="JSON"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="p">[</span><span class="err">'/home/jxu/random-fourier-features/examples'</span><span class="p">,</span><span class="w">
 </span><span class="err">'/home/jxu/miniconda</span><span class="mi">3</span><span class="err">/envs/rf/lib/python</span><span class="mi">37</span><span class="err">.zip'</span><span class="p">,</span><span class="w">
 </span><span class="err">'/home/jxu/miniconda</span><span class="mi">3</span><span class="err">/envs/rf/lib/python</span><span class="mf">3.7</span><span class="err">'</span><span class="p">,</span><span class="w">
 </span><span class="err">'/home/jxu/miniconda</span><span class="mi">3</span><span class="err">/envs/rf/lib/python</span><span class="mf">3.7</span><span class="err">/lib-dynload'</span><span class="p">,</span><span class="w">
 </span><span class="err">''</span><span class="p">,</span><span class="w">
 </span><span class="err">'/home/jxu/miniconda</span><span class="mi">3</span><span class="err">/envs/rf/lib/python</span><span class="mf">3.7</span><span class="err">/site-packages'</span><span class="p">,</span><span class="w">
 </span><span class="err">'/home/jxu/miniconda</span><span class="mi">3</span><span class="err">/envs/rf/lib/python</span><span class="mf">3.7</span><span class="err">/site-packages/IPython/extensions'</span><span class="p">,</span><span class="w">
 </span><span class="err">'/home/jxu/.ipython'</span><span class="p">]</span><span class="w">
</span></pre></td></tr></tbody></table></code></div></div>

<p>Basically, I did not exploit the detail of the problem this time. But I will list the solution here.</p>

<p><del>I install the jupyterhub by the command: <code class="language-plaintext highlighter-rouge">conda install -c conda-forge jupyterhub </code> from the <a href="https://stackoverflow.com/questions/43327052/how-to-uninstall-jupyter-notebook-installed-from-anaconda/43525766">link</a>.</del></p>

<p>I reinstall it by the commnads from the <a href="https://towardsdatascience.com/how-to-set-up-anaconda-and-jupyter-notebook-the-right-way-de3b7623ea4a">link</a>.</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>conda <span class="nb">install</span> <span class="nt">-c</span> conda-forge jupyterlab
conda <span class="nb">install</span> <span class="nt">-c</span> conda-forge nb_conda_kernels
<span class="c"># conda install -c conda-forge jupyter_contrib_nbextensions</span>
</pre></td></tr></tbody></table></code></div></div>

<p>Some userful jupyter extensions can be found <a href="https://towardsdatascience.com/jupyter-notebook-extensions-517fa69d2231">here</a>.</p>

<h4 id="17-use-slack-to-receive-signals-or-messages-from-the-commands"><span class="mr-2">17. Use slack to receive signals or messages from the commands</span><a href="#17-use-slack-to-receive-signals-or-messages-from-the-commands" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>A helpful <a href="https://uci-dsp-lab.slack.com/services/B028Q57836W?settings=1&amp;utm_source=in-prod&amp;utm_medium=inprod-link_app_settings-user_card-click#service_setup">link</a>.</p>

<p>Command for the direct message to the user:</p>

<p><code class="language-plaintext highlighter-rouge">curl -X POST --data-urlencode "payload={\"channel\": \"@memberid\", \"username\": \"webhookbot\", \"text\": \"The machine with GTX1080 has been rebooted:)\", \"icon_emoji\": \":ghost:\"}" &lt;link&gt;</code></p>

<p>Command for the channel message:</p>

<p><code class="language-plaintext highlighter-rouge">curl -X POST --data-urlencode "payload={\"channel\": \"#general\", \"username\": \"webhookbot\", \"text\": \"The machine with GTX1080 has been rebooted:)\", \"icon_emoji\": \":ghost:\"}" &lt;link&gt;</code></p>

<p>For example, we can send a message to the user if the machine reboot.</p>

<p>We can write the command to the file <code class="language-plaintext highlighter-rouge">\etc\rc.local</code>.</p>

<h4 id="18-ubuntu-set-default-desktop"><span class="mr-2">18. Ubuntu set Default Desktop</span><a href="#18-ubuntu-set-default-desktop" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<div class="language-shell highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>update-alternatives <span class="nt">--config</span> x-session-manager
<span class="nb">sudo </span>dpkg-reconfigure gdm3 <span class="c"># set the default desktop</span>
</pre></td></tr></tbody></table></code></div></div>

<p>Currently, I test it on Ubuntu 16.04 and figure out gdm3 cannot be run while lightdm works well. I am not sure the reason.</p>

</div>

<div class="post-tail-wrapper text-muted">

  <!-- categories -->
  

  <!-- tags -->
  
  <div class="post-tags">
    <i class="fa fa-tags fa-fw mr-1"></i>
      
      <a href="/tags/phd/"
          class="post-tag no-text-decoration" >PhD</a>
      
  </div>
  

  <div class="post-tail-bottom
    d-flex justify-content-between align-items-center mt-3 pt-5 pb-2">
    <div class="license-wrapper">

      

        

        This post is licensed under 
        <a href="https://creativecommons.org/licenses/by/4.0/">
          CC BY 4.0
        </a>
         by the author.

      
    </div>

    <!--
 Post sharing snippet
-->

<div class="share-wrapper">
  <span class="share-label text-muted mr-1">Share</span>
  <span class="share-icons">
    
    
    

    
      
        <a href="https://twitter.com/intent/tweet?text=Tricks%20Summary%202020%20-%20c0ldstudy&url=http%3A%2F%2Fc0ldstudy.github.io%2Fposts%2FTicks_Summary_2020%2F" data-toggle="tooltip" data-placement="top"
          title="Twitter" target="_blank" rel="noopener" aria-label="Twitter">
          <i class="fa-fw fab fa-twitter"></i>
        </a>
    
      
        <a href="https://www.facebook.com/sharer/sharer.php?title=Tricks%20Summary%202020%20-%20c0ldstudy&u=http%3A%2F%2Fc0ldstudy.github.io%2Fposts%2FTicks_Summary_2020%2F" data-toggle="tooltip" data-placement="top"
          title="Facebook" target="_blank" rel="noopener" aria-label="Facebook">
          <i class="fa-fw fab fa-facebook-square"></i>
        </a>
    
      
        <a href="https://t.me/share/url?url=http%3A%2F%2Fc0ldstudy.github.io%2Fposts%2FTicks_Summary_2020%2F&text=Tricks%20Summary%202020%20-%20c0ldstudy" data-toggle="tooltip" data-placement="top"
          title="Telegram" target="_blank" rel="noopener" aria-label="Telegram">
          <i class="fa-fw fab fa-telegram"></i>
        </a>
    

    <i id="copy-link" class="fa-fw fas fa-link small"
        data-toggle="tooltip" data-placement="top"
        title="Copy link"
        data-title-succeed="Link copied successfully!">
    </i>

  </span>
</div>


  </div><!-- .post-tail-bottom -->

</div><!-- div.post-tail-wrapper -->


      
    
    

    </div>
  </div> <!-- #core-wrapper -->

  <!-- panel -->
  <div id="panel-wrapper" class="col-xl-3 pl-2 text-muted">

    <div class="access">
      















  <div id="access-lastmod" class="post">
    <div class="panel-heading">Recently Updated</div>
    <ul class="post-content pl-0 pb-1 ml-1 mt-2">
      
        
        
        
      <li><a href="/posts/Coding_Interview/">Coding Interview</a></li>
      
        
        
        
      <li><a href="/posts/PC_attack/">[DSN2023] On Adversarial Robustness of Point Cloud Semantic Segmentation</a></li>
      
        
        
        
      <li><a href="/posts/C&W_Attack/">C&W Attack</a></li>
      
        
        
        
      <li><a href="/posts/S&P_2022/">S&P2022</a></li>
      
        
        
        
      <li><a href="/posts/Usenix-2022/">Usenix Security 2022</a></li>
      
    </ul>
  </div> <!-- #access-lastmod -->



      















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        



  <div id="access-tags">
    <div class="panel-heading">Trending Tags</div>
    <div class="d-flex flex-wrap mt-3 mb-1 mr-3">

    
      
      <a class="post-tag" href="/tags/phd/">PhD</a>
    
      
      <a class="post-tag" href="/tags/security/">Security</a>
    
      
      <a class="post-tag" href="/tags/machine-learning/">Machine Learning</a>
    
      
      <a class="post-tag" href="/tags/website/">Website</a>
    
      
      <a class="post-tag" href="/tags/system/">System</a>
    
      
      <a class="post-tag" href="/tags/ctf/">CTF</a>
    
      
      <a class="post-tag" href="/tags/conferences/">Conferences</a>
    
      
      <a class="post-tag" href="/tags/design/">Design</a>
    
      
      <a class="post-tag" href="/tags/network/">Network</a>
    
      
      <a class="post-tag" href="/tags/skills/">Skills</a>
    

    </div>
  </div>


    </div>

    
      
      



  <div id="toc-wrapper" class="pl-0 pr-4 mb-5">
    <div class="panel-heading pl-3 pt-2 mb-2">Contents</div>
    <nav id="toc"></nav>
  </div>

  <!-- toc.js will be loaded at medium priority -->
  <script src="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.js"></script>


    
  </div>

</div>

<!-- tail -->

<div class="row">
  <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5">
    
      
      <!--
 Recommend the other 3 posts according to the tags and categories of the current post,
 if the number is not enough, use the other latest posts to supplement.
-->

<!-- The total size of related posts  -->


<!-- An random integer that bigger than 0  -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy}  -->








  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  
    
  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  








<!-- Fill with the other newlest posts  -->





  <div id="related-posts" class="mb-2 mb-sm-4">
    <h3 class="pt-2 mb-4 ml-1"
      data-toc-skip>Further Reading</h3>
    <div class="card-deck mb-4">
    
      
      
      <div class="card">
        <a href="/posts/Writing/">
          <div class="card-body">
            <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->





<em class="small"
    data-ts="1664694000"
    data-df="ll"
    >
  Oct  2, 2022
</em>

            <h3 class="pt-0 mt-1 mb-3" data-toc-skip>Academic Writing</h3>
            <div class="text-muted small">
              <p>
                





                In this blog, I would like to talk about my summary about how to write a good paper or rebuttal in academia.

Paper Writing

  Determining the big picture:
    
      Build the scaffolding before f...
              </p>
            </div>
          </div>
        </a>
      </div>
    
      
      
      <div class="card">
        <a href="/posts/C&W_Attack/">
          <div class="card-body">
            <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->





<em class="small"
    data-ts="1581753600"
    data-df="ll"
    >
  Feb 15, 2020
</em>

            <h3 class="pt-0 mt-1 mb-3" data-toc-skip>C&W Attack</h3>
            <div class="text-muted small">
              <p>
                





                C&amp;amp;W attack is a pretty insightful attack in adversarial machine learning. So I use this blog to summarize the general ideas of it.

Towards Evaluating the Robustness of Neural Networks

Authors...
              </p>
            </div>
          </div>
        </a>
      </div>
    
      
      
      <div class="card">
        <a href="/posts/Evaluation_of_Adversarial_Example_Defenses/">
          <div class="card-body">
            <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->





<em class="small"
    data-ts="1583481600"
    data-df="ll"
    >
  Mar  6, 2020
</em>

            <h3 class="pt-0 mt-1 mb-3" data-toc-skip>Evaluation of Adversarial Example Defenses</h3>
            <div class="text-muted small">
              <p>
                





                On Adaptive Attacks to Adversarial Example Defenses

Authors: Florian Tramer, Nicholas Carlini, Wieland Brendel, Aleksander Madry

Key Points:


  Thirteen Advanced Defenses Evaluation





  
    ...
              </p>
            </div>
          </div>
        </a>
      </div>
    
    </div> <!-- .card-deck -->
  </div> <!-- #related-posts -->


    
      
      <!--
  Navigation buttons at the bottom of the post.
-->

<div class="post-navigation d-flex justify-content-between">
  
  <a href="/posts/VS_Code_Plugins/" class="btn btn-outline-primary"
    prompt="Older">
    <p>Visual Studio Code Plugins</p>
  </a>
  

  
  <a href="/posts/Machine-Learning_Tutorial/" class="btn btn-outline-primary"
    prompt="Newer">
    <p>Machine Learning Tutorial</p>
  </a>
  

</div>

    
      
      <!--  The comments switcher -->

  
  <!-- https://giscus.app/ -->
<script type="text/javascript">
  $(function () {
    const origin = "https://giscus.app";
    const iframe = "iframe.giscus-frame";
    const lightTheme = "light";
    const darkTheme = "dark_dimmed";
    let initTheme = lightTheme;

    if ($("html[data-mode=dark]").length > 0
        || ($("html[data-mode]").length == 0
            && window.matchMedia("(prefers-color-scheme: dark)").matches)) {
      initTheme = darkTheme;
    }

    let giscusAttributes = {
      "src": "https://giscus.app/client.js",
      "data-repo": "C0ldstudy/c0ldstudy.github.io",
      "data-repo-id": "MDEwOlJlcG9zaXRvcnkyMzgxNzM1ODU=",
      "data-category": "Announcements",
      "data-category-id": "DIC_kwDODjI9kc4CV58d",
      "data-mapping": "pathname",
      "data-reactions-enabled": "1",
      "data-emit-metadata": "0",
      "data-theme": initTheme,
      "data-input-position": "bottom",
      "data-lang": "",
      "crossorigin": "anonymous",
      "async": ""
    };

    let giscusScript = document.createElement("script");
    Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value));
    document.getElementById("tail-wrapper").appendChild(giscusScript);

    addEventListener("message", (event) => {
      if (event.source === window && event.data &&
            event.data.direction === ModeToggle.ID) {
        /* global theme mode changed */
        const mode = event.data.message;
        const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme);

        const message = {
          setConfig: {
            theme: theme
          }
        };

        const giscus = document.querySelector(iframe).contentWindow;
        giscus.postMessage({ giscus: message }, origin);
      }

    });

  });
</script>



    
  </div>
</div>


      </div>

      <!--
  The Search results
-->
<div id="search-result-wrapper" class="d-flex justify-content-center unloaded">
  <div class="col-12 col-sm-11 post-content">
    <div id="search-hints">
      















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        



  <div id="access-tags">
    <div class="panel-heading">Trending Tags</div>
    <div class="d-flex flex-wrap mt-3 mb-1 mr-3">

    
      
      <a class="post-tag" href="/tags/phd/">PhD</a>
    
      
      <a class="post-tag" href="/tags/security/">Security</a>
    
      
      <a class="post-tag" href="/tags/machine-learning/">Machine Learning</a>
    
      
      <a class="post-tag" href="/tags/website/">Website</a>
    
      
      <a class="post-tag" href="/tags/system/">System</a>
    
      
      <a class="post-tag" href="/tags/ctf/">CTF</a>
    
      
      <a class="post-tag" href="/tags/conferences/">Conferences</a>
    
      
      <a class="post-tag" href="/tags/design/">Design</a>
    
      
      <a class="post-tag" href="/tags/network/">Network</a>
    
      
      <a class="post-tag" href="/tags/skills/">Skills</a>
    

    </div>
  </div>


    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>


    </div> <!-- #main-wrapper -->

    <!-- The Footer -->

<footer>
    <div class="container pl-lg-4 pr-lg-4">
      <div hidden>
        <div class="github_chart">
          <img src="http://ghchart.rshah.org/409ba5/C0ldstudy" alt="C0ldstudy's Blue Github chart"/>
          <script type='text/javascript' id='clustrmaps' src='//cdn.clustrmaps.com/map_v2.js?cl=ffffff&w=300&t=tt&d=PWaejm3rz2TG6HOtwcekX2kM9kPWz2aP6GYhuOVoNpA'></script>
        </div>
      </div>

        <div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3">
        <div class="footer-left">
          <p class="mb-0">
            Â© 2023
            <a href="https://twitter.com/JiacenXu">Jiacen (Jason) Xu</a>.
            
            <span data-toggle="tooltip" data-placement="top"
              title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span>
            
          </p>
        </div>

        <!-- <script  type="text/javascript" id="clustrmaps" src="//clustrmaps.com/map_v2.js?d=PWaejm3rz2TG6HOtwcekX2kM9kPWz2aP6GYhuOVoNpA&cl=ffffff&w=a"></script> -->
        <div class="footer-right">
          <p class="mb-0"><!-- Using the <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> theme <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a>. -->
          </p>
        </div>
      </div>
    </div>
  </footer>


    

    <div id="mask"></div>

    <a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button">
      <i class="fas fa-angle-up"></i>
    </a>

    
      <div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true"
        data-animation="true" data-autohide="false">
        <div class="toast-header">
          <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="toast-body text-center pt-0">
          <p class="pl-2 pr-2 mb-3">A new version of content is available.</p>
          <button type="button" class="btn btn-primary" aria-label="Update">
            Update
          </button>
        </div>
      </div>
    

    <!--
  Jekyll Simple Search loader
  See: <https://github.com/christian-fei/Simple-Jekyll-Search>
-->





<script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script>

<script>
SimpleJekyllSearch({
  searchInput: document.getElementById('search-input'),
  resultsContainer: document.getElementById('search-results'),
  json: '/assets/js/data/search.json',
  searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0">  <a href="{url}">{title}</a>  <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">    {categories}    {tags}  </div>  <p>{snippet}</p></div>',
  noResultsText: '<p class="mt-5">Oops! No results found.</p>',
  templateMiddleware: function(prop, value, template) {
    if (prop === 'categories') {
      if (value === '') {
        return `${value}`;
      } else {
        return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`;
      }
    }

    if (prop === 'tags') {
      if (value === '') {
        return `${value}`;
      } else {
        return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`;
      }
    }
  }
});
</script>


    <!-- JS selector for site. -->

<!-- layout specified -->


  



  <!-- image lazy-loading & popup & clipboard -->
  

  







  
    

    

  



  
    

    

  



  
    

    

  




  <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js"></script>





  

  

  







  
    

    

  



  
    

    

  



  
    

    

  



  
    

    

  




  <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1.11.6/dayjs.min.js,npm/dayjs@1.11.6/locale/en.min.js,npm/dayjs@1.11.6/plugin/relativeTime.min.js,npm/dayjs@1.11.6/plugin/localizedFormat.min.js"></script>







<script defer src="/assets/js/dist/post.min.js"></script>



<!-- commons -->

<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>




  </body>

</html>

